
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Explore Simplicity of Public Cloud Network Configuration with Cloud Network Controller (formerly cAPIC) and Nexus Dashboard Orchestrator (NDO)">
      
      
        <meta name="author" content="Marcin Duma & Karol Okraska">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Print Site - CiscoLive EMEA 2023 --- LTRCLD-2557</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CiscoLive EMEA 2023 --- LTRCLD-2557" class="md-header__button md-logo" aria-label="CiscoLive EMEA 2023 --- LTRCLD-2557" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CiscoLive EMEA 2023 --- LTRCLD-2557
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print Site
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CiscoLive EMEA 2023 --- LTRCLD-2557" class="md-nav__button md-logo" aria-label="CiscoLive EMEA 2023 --- LTRCLD-2557" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CiscoLive EMEA 2023 --- LTRCLD-2557
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Lab Access
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Lab Access" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Lab Access
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_access/" class="md-nav__link">
        Accessing the Lab Environment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          INFRA Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="INFRA Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          INFRA Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra-config/" class="md-nav__link">
        Sites onboarding
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra-config-msite/" class="md-nav__link">
        Multisite configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Tenant configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tenant configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tenant configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ndo-tenant/" class="md-nav__link">
        NDO Tenant configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aws-trust/" class="md-nav__link">
        AWS Trust
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Use-cases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Use-cases" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Use-cases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../use-case1/" class="md-nav__link">
        Use-case 01 - Stretched VRF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../use-case2/" class="md-nav__link">
        Use-case 02 - Internet Gateway
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../use-case3/" class="md-nav__link">
        Use-case 03 - Inter-Tenant routing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Appendixes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Appendixes" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Appendixes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1">
          Lab details
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Lab details" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Lab details
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod1/" class="md-nav__link">
        POD-01
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod2.md" class="md-nav__link">
        POD-02
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod3.md" class="md-nav__link">
        POD-03
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod4.md" class="md-nav__link">
        POD-04
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod5.md" class="md-nav__link">
        POD-05
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod6.md" class="md-nav__link">
        POD-06
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod7.md" class="md-nav__link">
        POD-07
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod8.md" class="md-nav__link">
        POD-08
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod9.md" class="md-nav__link">
        POD-09
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod10.md" class="md-nav__link">
        POD-10
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../object-map/" class="md-nav__link">
        ACI to Public Cloud Object mapping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resources/" class="md-nav__link">
        Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="./" class="md-nav__link">
        PRINT version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    1. Home
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-lab-access" class="md-nav__link">
    I. Lab Access
  </a>
  
    <nav class="md-nav" aria-label="I. Lab Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lab_access" class="md-nav__link">
    2. Accessing the Lab Environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-infra-configuration" class="md-nav__link">
    II. INFRA Configuration
  </a>
  
    <nav class="md-nav" aria-label="II. INFRA Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#infra-config" class="md-nav__link">
    3. Sites onboarding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infra-config-msite" class="md-nav__link">
    4. Multisite configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-tenant-configuration" class="md-nav__link">
    III. Tenant configuration
  </a>
  
    <nav class="md-nav" aria-label="III. Tenant configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ndo-tenant" class="md-nav__link">
    5. NDO Tenant configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-trust" class="md-nav__link">
    6. AWS Trust
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-use-cases" class="md-nav__link">
    IV. Use-cases
  </a>
  
    <nav class="md-nav" aria-label="IV. Use-cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case1" class="md-nav__link">
    7. Use-case 01 - Stretched VRF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case2" class="md-nav__link">
    8. Use-case 02 - Internet Gateway
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case3" class="md-nav__link">
    9. Use-case 03 - Inter-Tenant routing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-appendixes" class="md-nav__link">
    V. Appendixes
  </a>
  
    <nav class="md-nav" aria-label="V. Appendixes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#object-map" class="md-nav__link">
    10. ACI to Public Cloud Object mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    11. Resources
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section id="print-site-cover-page">
            <div>

    
        <h1>CiscoLive EMEA 2023 --- LTRCLD-2557</h1>
    

</div>


<table>

    
    <tr>
        <td>Description</td>
        <td>Explore Simplicity of Public Cloud Network Configuration with Cloud Network Controller (formerly cAPIC) and Nexus Dashboard Orchestrator (NDO)</td>
    </tr>
    

    
    <tr>
        <td>Author(s)</td>
        <td>Marcin Duma & Karol Okraska</td>
    </tr>
    

    

    

</table>
        </section>
        
        <div id="print-site-banner">
            <p>
<center><em>This box will disappear when printing</em></center>
</p>
<p>
<center> This page has combined all site pages into one. You can export to PDF using <b>File > Print > Save as PDF</b>.</center>
</p>
        </div>
        
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-welcome-to-ciscolive-2023-instructor-lab-about-aci-multicloud">Welcome to CiscoLive 2023 - Instructor Lab about ACI Multicloud</h1>
<p>Speakers:</p>
<p><em>Karol Okraska</em>, CX Delivery Architect, Cisco Systems, Inc.</p>
<p><em>Marcin Duma</em>, CX Delivery Architect, Cisco Systems, Inc.</p>
<h2 id="index-cisco-aci-support-of-public-cloud-infrastructure">Cisco ACI support of Public Cloud infrastructure</h2>
<p>Cisco Cloud Network Controller (formerly Cloud APIC) provides enterprises with networking tools necessary to accelerate their hybrid-cloud and/or multicloud journey.</p>
<p>Utilizing cloud-native constructs, the solution enables automation that accelerates infrastructure deployment and governance, and simplifies management to easily connect workloads across multicloud environments. The Cisco Cloud Network Controller vision is to support enhanced observability, operations, and troubleshooting across the entire environment.</p>
<p>Cisco Cloud Network Controller enables:</p>
<p>●      Seamless connectivity for any workload at scale across any location</p>
<p>●      Operational simplicity and visibility across a vast multisite, multicloud</p>
<p>●      Data-center network</p>
<p>●      Easy L4-7 services integration</p>
<p>●      Consistent security and segmentation</p>
<p>●      Business continuity and disaster recovery</p>
<h2 id="index-cisco-cloud-network-solution-components">Cisco Cloud Network Solution components:</h2>
<p>Cisco Cloud Network Controller is the main architectural component of this multicloud solution. It is the unified point of automation and management for the solution fabric including network and security policy, health monitoring, and optimizes performance and agility. The complete solution includes:</p>
<p>●      Cisco Cloud Network Controller(deployed in each Public Cloud which is to be managed) </p>
<p>●      Cisco Nexus Dashboard (in our lab deployed in AWS Cloud) - Multicloud networking orchestration and policy management, disaster recovery, and high availability, as well as provisioning and health monitoring</p>
<p>●      Cisco Catalyst® 8000V - deployed in Public Clouds, allowing for communication with other Clouds or on-premises datacenter. Responsible for traffic secuirty and end to end policy enforcement </p>
<h2 id="index-topology">Topology</h2>
<p>In this lab we will be using two(2) Public Cloud Provders: </p>
<p>●      Microsoft Azure</p>
<p>●      Amazon AWS </p>
<p>However Cloud Network Controller (CNC) is also supported on Google Cloud. </p>
<p>In both Public Enviroments CNC will be deployed. Nexus Dashboard orchestrator will run on Nexus Dashboard appliance deployed in AWS cloud. </p>
<p>Due to time concern of this lab, Cloud Network Controller and Nexus Dashboard along with Nexus Dashboard Orchestrator Application will be pre-installed for you and ready for configuration.</p>
<p><strong>Intial lab diagram:</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image1a.png" width = 800></p>
<p>As indicated in the diagram, this lab is using EMEA based regions in both AWS(eu-central-1) and Azure(France Central) Clouds. </p>
<p>Each POD have a dedicated Azure AAD Tenant and Subscription which will be shared to host both Infrastructure components (Cloud Network Controller, Cloud Routers), as well as User Virutal Machines for testing. </p>
<p>For AWS Cloud each Tenant needs to have it's own Account ID, hence each POD have two(2) of them. First - for Infrastructure components (Cloud Network Controller, Cloud Routers, Nexus Dashboard), second for User Tenant hosting User Virtual Machines. </p>
<h2 id="index-lab-agenda"><strong>Lab agenda</strong></h2>
<h3 id="index-1-infrastructure-veryfication-login-and-access">1. Infrastructure veryfication - login and access</h3>
<h3 id="index-2-site-onboarding-in-nexus-dashboard">2. Site onboarding in Nexus Dashboard</h3>
<h3 id="index-3-multisite-infrastructure-configuration">3. Multisite infrastructure configuration</h3>
<h3 id="index-4-multisite-configuration-check">4. Multisite configuration check</h3>
<h3 id="index-5-tenant-creation-and-public-cloud-trust-configuration">5. Tenant creation and Public Cloud Trust configuration</h3>
<h3 id="index-6-three3-common-use-cases-configuration-and-verifcation">6. Three(3) common use-cases configuration and verifcation</h3>
<h4 id="index--stretched-vrf-across-public-clouds-with-cloud-local-epgs">- Stretched VRF across Public Clouds with Cloud-local EPGs</h4>
<h4 id="index--internet-gateway-configuration-in-aws">- Internet Gateway configuration in AWS</h4>
<h4 id="index--inter-tenant-routing">- Inter-Tenant routing</h4>
<p>Step by step configuration will guide you towards final topology as indicated in the picture below: </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image251.png" width = 800></p>
<p>The aim of the lab is to deploy end to end infrastructure hosted in two different Public Clouds with help of Cloud Network Controller and Nexus Dashboard, and also to perform validation and communication tests. </p>
<p><strong><p style="text-align: center;">Enjoy!</p></strong></p></section>
                        <h1 class='nav-section-title' id='section-lab-access'>
                            Lab Access <a class='headerlink' href='#section-lab-access' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="lab_access"><h1 id="lab_access-connectivity-check">Connectivity Check</h1>
<h2 id="lab_access-1-lab-access-general-description">1. Lab access general description</h2>
<p>This lab is fully hosted in Public Cloud infrastrucure, both AWS and Azure, no local resources are used. </p>
<p>You will have access to Public Cloud Console Interface, as well as you will be able to login to necessary resources and appliances. </p>
<h2 id="lab_access-2-aws-and-azure-console-access-details">2. AWS and Azure console access details:</h2>
<p>Login link for AWS console: </p>
<p><a href="https://console.aws.amazon.com" target="_blank">https://console.aws.amazon.com</a></p>
<p>Login link for Azure portal: </p>
<p><a href="https://portal.azure.com" target="_blank">https://portal.azure.com</a></p>
<h2 id="lab_access-3-accessing-cloud-network-controller-and-nexus-dashboard">3. Accessing Cloud Network Controller and Nexus Dashboard.</h2>
<p>All appliances are addressed with Public IP address, hence it can be accessed from local browser without any additional settings or VPN connections. </p>
<p>List of IP addreses for each POD can be found in respective POD link:</p>
<p><a href="#pod1">Lab Details POD1</a></p>
<p><a href="#lab_access-pod2.md">Lab Details POD2</a></p></section><h1 class='nav-section-title-end'>Ended: Lab Access</h1>
                        <h1 class='nav-section-title' id='section-infra-configuration'>
                            INFRA Configuration <a class='headerlink' href='#section-infra-configuration' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="infra-config"><h1 id="infra-config-infrastructure-configuration-site-onboarding">Infrastructure configuration - Site onboarding</h1>
<h2 id="infra-config-public-ip-address-of-nexus-dashboard-and-cisco-cloud-network-controller-in-aws">Public IP Address of Nexus Dashboard and Cisco Cloud Network Controller in AWS</h2>
<h3 id="infra-config-1-open-aws-console-via-browser">1. Open AWS console via browser</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image3.png" width = 400></p>
<h3 id="infra-config-2-select-iam-user-provide-account-id-and-hit-next">2. Select IAM user,  provide Account ID and hit "Next"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image4.png" width = 300></p>
<h3 id="infra-config-3-provide-username-and-password-and-hit-sign-in">3. Provide Username and password and hit "Sign In"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image5.png" width = 300></p>
<h3 id="infra-config-4-in-aws-search-bar-type-ec2-and-select-ec2-services-tab">4. In AWS Search Bar type "EC2" and Select "EC2" Services Tab</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image6.png" width = 800></p>
<h3 id="infra-config-5-from-resources-select-instances-running">5. From "Resources" select "Instances (Running)"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image7.png" width = 800></p>
<h3 id="infra-config-6-on-the-instances-list-scroll-to-the-right-and-note-down-public-ipv4-address-for">6. On the Instances List scroll to the right and note down "Public IPv4 address" for:</h3>
<ul>
<li>
<p><strong>"ND1-Master"</strong></p>
</li>
<li>
<p><strong>"Cisco Cloud Network Controller"</strong></p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image8.png" width = 800></p>
<h2 id="infra-config-public-ip-address-of-cisco-cloud-network-controller-in-azure">Public IP Address of Cisco Cloud Network Controller in Azure</h2>
<h3 id="infra-config-1-open-azure-portal-via-browser">1. Open Azure portal via browser</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image14.png" width = 400></p>
<h3 id="infra-config-2-enter-your-username-along-with-domain-and-hit-next">2. Enter your username along with domain and hit "Next"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image15.png" width = 400></p>
<h3 id="infra-config-3-provide-password-and-hit-sign-in">3. Provide password and hit "Sign In"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image16.png" width = 400></p>
<h3 id="infra-config-4-use-skip-for-now-option-for-account-protection">4. Use "Skip for now" option for Account Protection</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image17.png" width = 800></p>
<h3 id="infra-config-5-in-search-bar-look-for-virtual-machines-and-select-from-services">5. In Search bar look for "virtual machines" and select from services</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image18.png" width = 800></p>
<h3 id="infra-config-6-on-the-virtual-machines-list-scroll-to-the-right-and-note-down-public-ip-address-for">6. On the Virtual Machines list scroll to the right and note down "Public IP address" for:</h3>
<ul>
<li><strong>"CloudNetworkController"</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image19.png" width = 800></p>
<h2 id="infra-config-nexus-dashboard-site-onboarding">Nexus Dashboard site onboarding</h2>
<p><strong>Cisco Nexus Dashboard</strong> is a single launch point to monitor and scale across different sites, whether it is Cisco Application Centric Infrastructure™ (Cisco ACI®) fabric controllers, the Cisco® Application Policy Infrastructure Controller (APIC), Cisco Nexus Dashboard Fabric Controller (NDFC), or a Cloud APIC running in a public cloud provider environment.</p>
<p>Cisco Nexus Dashboard provides a single focal point to unite the disparate views of hybrid-cloud data-center operations, application deployment, and performance.</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image9a.png" width = 800></p>
<p><strong>Benefits</strong></p>
<p>●Easy to use</p>
<ul>
<li>
<p>Customizable role-based UI view to provide a focused view on network operator use cases</p>
</li>
<li>
<p>Single Sign-On (SSO) for seamless user experience across operation services</p>
</li>
<li>
<p>Single console for health monitoring and quick service turn-up</p>
</li>
</ul>
<p>●Easy to scale</p>
<ul>
<li>
<p>Ensure high availability, scale-out operations from a single dashboard</p>
</li>
<li>
<p>Scale use cases leveraging flexible deployment options</p>
</li>
<li>
<p>Operations that span across on-premises, multicloud, and edge networks</p>
</li>
</ul>
<p>●Easy to maintain</p>
<ul>
<li>
<p>Seamless integration and lifecycle management of operational services</p>
</li>
<li>
<p>Onboard and manage operational services across on-premises, cloud, or hybrid environments</p>
</li>
<li>
<p>Single integration point for critical third-party applications and tools</p>
</li>
</ul>
<p>●Flexible deployment options</p>
<ul>
<li>
<p>On premises: Run Cisco Nexus Dashboard on the Cisco Nexus Dashboard platform</p>
</li>
<li>
<p>Hybrid: Run Cisco Nexus Dashboard on premises and in the cloud</p>
</li>
<li>
<p>Virtual: Run Cisco Nexus Dashboard on any local compute</p>
</li>
<li>
<p>Cloud: Run Cisco Nexus Dashboard on public cloud of choice</p>
</li>
<li>
<p>SaaS: Deploy, maintain, and support your infrastructure from anywhere*</p>
</li>
</ul>
<p><strong>Let's now login and start using it! </strong></p>
<h3 id="infra-config-1-login-to-nexus-dasboard-using-nd1-master-public-ipv4-address">1. Login to Nexus Dasboard using <strong>"ND1-Master"</strong> Public IPv4 Address</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image9.png" width = 800></p>
<h3 id="infra-config-2-hit-get-started-and-setup-screen-will-pop-up">2. Hit "Get started" and Setup screen will pop-up</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image10.png" width = 800></p>
<h3 id="infra-config-3-on-the-add-sites-section-hit-begin">3. On the "Add Sites" section hit "Begin"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image11.png" width = 800></p>
<h3 id="infra-config-4-hit-add-site-button">4. Hit "Add Site" button</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image12.png" width = 800></p>
<h3 id="infra-config-5-add-aws-cloud-network-controller">5. Add AWS Cloud Network Controller</h3>
<ul>
<li>Site Type: <strong>"Cloud Network Controller"</strong></li>
<li>Name: <strong>"CNC-AWS-01"</strong></li>
<li>Hostname/IP Address: <strong>"Public IPv4 Address of AWS Cisco Cloud Network Controller"</strong></li>
<li>Username: <strong>admin</strong></li>
<li>Password: <strong>CiscoLive2023!</strong></li>
<li>Login Domain: empty</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image13.png" width = 800></p>
<h3 id="infra-config-6-hit-save">6. Hit <strong>"Save"</strong></h3>
<p><strong>"AWS site should be added now, stay on the same page! "</strong></p>
<h3 id="infra-config-7-hit-add-site-button-one-more-time-to-add-azure-site">7. Hit "Add site" button one more time to add Azure site</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image20.png" width = 800></p>
<h3 id="infra-config-8-add-azure-site-details">8. Add Azure site details</h3>
<ul>
<li>Site Type: <strong>"Cloud Network Controller"</strong></li>
<li>Name: <strong>"CNC-Azure-01"</strong></li>
<li>Hostname/IP Address: <strong>"Public IP Address of Azure CloudNetworkController"</strong></li>
<li>Username: <strong>admin</strong></li>
<li>Password: <strong>CiscoLive2023!</strong></li>
<li>Login Domain: empty</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image21.png" width = 800></p>
<h3 id="infra-config-6-hit-save_1">6. Hit <strong>"Save"</strong></h3>
<h2 id="infra-config-check-the-site-list">Check the site list</h2>
<p>You should see both sites added under the site list. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image22.png" width = 800></p>
<p>On the Site list hit "Continue" and then "Done" button to finish Initial Setup.</p>
<p>Navigate to <strong>"Go To Dashboard"</strong> in bottom right corner - you should be moved to ND Dashboard with Site Map. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image23.png" width = 800></p>
<p>In this section <strong>Azure</strong> and <strong>AWS Cloud Network Controllers</strong> were added to <strong>Network Dashboard</strong>. We will now proceed to <strong>Multisite</strong> configuration, and start managing those sites from <strong>Nexus Dashboard Orchestrator</strong>. We will also build an IPSec tunnels between them, so they can securly exchange traffic. </p></section><section class="print-page" id="infra-config-msite"><h1 id="infra-config-msite-infrastructure-configuration-multisite-configuration">Infrastructure configuration - MultiSite configuration</h1>
<p>In this lab section we will use Nexus Dashboard Orchestrator(NDO) to connect 2 Cloud Fabrics together. </p>
<h2 id="infra-config-msite-nexus-dashboard-orchestratorndo">Nexus Dashboard Orchestrator(NDO)</h2>
<p><strong>Cisco Nexus Dashboard Orchestrator (NDO)</strong> provides consistent network and policy orchestration, scalability, and disaster recovery across multiple data centers through a single pane of glass while allowing the data center to go wherever the data is.</p>
<p>NDO allows you to interconnect separate Cisco® Application Centric Infrastructure (Cisco ACI®) sites, Cisco Cloud ACI sites, and Cisco Nexus Dashboard Fabric Controller (NDFC) sites, each managed by its own controller (APIC cluster, NDFC cluster, or Cloud APIC instances in a public cloud). The on-premises sites (ACI or NDFC in the future) can be extended to different public clouds for hybrid-cloud deployments while cloud-first installations can be extended to multi-cloud deployments without on-premises sites. </p>
<p>The single-pane network interconnect policy management and the consistent network workload and segmentation policy provided by NDO allows monitoring the health of the interconnected fabrics, enforcement of segmentation and security policies, and performance of all tasks required to define tenant intersite policies in APIC, NDFC, and cAPIC sites. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image23a.png" width = 800></p>
<p>● Key features and benefits</p>
<ul>
<li>
<p>Single pane of glass for administration and orchestration of multiple networking fabrics for both Cisco ACI and NDFC</p>
</li>
<li>
<p>Automation of the configuration and management of intersite network interconnects across an IP backbone for both Cisco ACI and NDFC</p>
</li>
<li>
<p>Consistent multitenant policy across multiple sites, which allows IP mobility, disaster recovery, and active/active use cases for data centers</p>
</li>
<li>
<p>Capability to map tenants, applications, and associated networks to specific availability domains within the Cisco Multi-Site architecture for both Cisco ACI and NDFC</p>
</li>
<li>
<p>Hybrid cloud and multi-cloud orchestration supporting on-premises Cisco ACI sites and public cloud sites (AWS and Azure)</p>
</li>
<li>
<p>Capability to have multi-cloud ACI deployments without on-premises sites</p>
</li>
<li>
<p>Scale out sites and leaf switches based on resource growth</p>
</li>
</ul>
<p>●Use cases</p>
<p>There are several uses of Cisco Nexus Dashboard Orchestrator. Some of the main use cases include:</p>
<ul>
<li>
<p>Large scale data center deployment</p>
</li>
<li>
<p>Data center interconnectivity</p>
</li>
<li>
<p>Cisco NDO multi-domain integrations</p>
</li>
<li>
<p>Hybrid cloud and multi-cloud</p>
</li>
<li>
<p>Service provider – 5G telco</p>
</li>
</ul>
<p><strong>Let's now explore possibilites of Cisco Nexus Dashboard Orchestrator!</strong></p>
<h3 id="infra-config-msite-1-ndo-service-introduction">1. NDO Service Introduction</h3>
<p>In the navigation menu on the left go to <strong>"Admin Console"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image24.png" width = 400></p>
<p>You will be moved to <strong>Admin Console</strong> page, where you can see <strong>Health</strong> of your Nexus Dashboard and status of sites and services. </p>
<p>Navigate to <strong>"Sites"</strong> tab and verify if <strong>"Connectivity Status"</strong> of you sites is <strong>"Up"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image26.png" width = 800></p>
<p>Navigate to <strong>"Sevices"</strong> tab to see what applications are installed on this Nexus Dashboard</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image25.png" width = 400></p>
<p><strong>Nexus Dashboard Orchestrator</strong> is already installed and enabled under <strong>"Service Catalog"</strong> inside <strong>"Installed Service"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image27.png" width = 800></p>
<p>Hit <strong>"Open"</strong> button in order to login </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image28.png" width = 400></p>
<p>You will be now redirected to <strong>Nexus Dashboard Orchestrator</strong> Dashboard. </p>
<h3 id="infra-config-msite-2-ndo-sites-onboarding">2. NDO Sites Onboarding</h3>
<p>In order to configure AWS and Azure sites from NDO, added previously on <strong>Nexus Dashboard</strong>, sites have to be <strong>Maneged</strong> and have <strong>Site ID</strong> assigned. </p>
<p>Navigate to <strong>Sites</strong>: </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image30.png" width = 800></p>
<p>Click on <strong>"Unmanaged"</strong> box under <strong>State</strong> Column for each site and assign <strong>Site ID</strong>, confirming with <strong>"Add"</strong> button. </p>
<div class="highlight"><pre><span></span><code>For AWS Site - set ID **10**

For Azure Site - set ID **20**
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image31.png" width = 800></p>
<p>After this operation - both sites should be visible as <strong>Managed</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image32.png" width = 800></p>
<h3 id="infra-config-msite-3-site-connectivity-configuration">3. Site Connectivity Configuration</h3>
<p>In Next Step we would configure Infrastructure to connect 2 Cloud ACI Sites togehter.</p>
<p>Navigate to <strong>Infrastructure</strong> -&gt; <strong>Site Connectivity</strong> -&gt; <strong>Configure</strong> button</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image33.png" width = 800></p>
<p>On the <strong>General Settings</strong> Page, scroll down to OSPF Configuration and fill in OSPF Area ID to value <strong>0.0.0.0</strong>, leave other setting as default. OSPF Protocol will be configured over IPSec tunnel and allows for prefixes exchange to bring BGP Neighbourship. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image34.png" width = 800></p>
<p>Go to tab <strong>"IPSec Tunnel Subnet Pools"</strong>, click <strong>Add IP address</strong> button and add subnet</p>
<div class="highlight"><pre><span></span><code>Subnet: 192.168.255.0/24
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image40.png" width = 800></p>
<p>Confirm with <strong>checkbox</strong> button.</p>
<p>You may notice that there is already one subnet 169.254.0.0/16 configured, which is used for Tunnel addresing between Cloud Routers and Cloud Load Balancers(Azure)/Transit Gateways(AWS). Those tunnles are used to forward traffic from Cloud instances to Cloud Routers and further to another sites. </p>
<p>In the left navigation bar, under the Sites bar, click on first site <strong>CNC-AWS-01</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image35.png" width = 200></p>
<p>Enable the site for MultiSite by checking the checkbox <strong>"ACI Multisite"</strong> also enable <strong>"Contract Based Routing"</strong></p>
<div class="highlight"><pre><span></span><code>Settings:
- ACI Multisite - checked 
- Contract Based Routing - checked
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image36.png" width = 800></p>
<p>Click the "Add Site" button to cross-connect 2 sites. Under <strong>Connected to Site</strong> select <strong>Select a Site</strong> hyperlink. </p>
<p>Select Azure fabric and hit <strong>Select</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image37.png" width = 800></p>
<p>For the <strong>Connection Type</strong> select <strong>Public Internet</strong> and hit <strong>Ok</strong>. Leave rest of the setting as default, you can review them. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image38.png" width = 800></p>
<p>Move to <strong>CNC-Azure-01</strong> Site and also enable the site for MultiSite by checking the checkbox <strong>"ACI Multisite"</strong> - simiar as in previous point. </p>
<div class="highlight"><pre><span></span><code>Settings:
- ACI Multisite - checked 
- Contract Based Routing - checked
</code></pre></div>
<p>Note that second site is already selected for Inter-Site Connectivity</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image39.png" width = 800></p>
<p>Once done, locate the <strong>Deploy</strong> button on top the screen, click it and Select <strong>"Deploy Only"</strong>, hit <strong>Yes</strong> for confirmation. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image41.png" width = 800></p>
<p>As you hit <strong>Deploy</strong> button, NDO will now configure CNC and Cloud Routes (previously deployed and visible in AWS EC2/Azure Virutal Machines pages). Configuration includes:  </p>
<div class="highlight"><pre><span></span><code>- IPSec tunnels, full mesh between all 4 routers (2 per Cloud)
- OSPF routing over IPSec Tunnels
- BGP EVPN peering for prefixes exchange
</code></pre></div>
<h2 id="infra-config-msite-inter-site-connectivity-veryfication">Inter-site connectivity veryfication</h2>
<p><strong>It may take 5-10 minutes for configuration to be pushed and Tunnels to be established.</strong></p>
<p>At this point we configured this part of our topology diagram: </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image42.png" width = 800></p>
<h3 id="infra-config-msite-1-nexush-dashboard-view">1. Nexush Dashboard view</h3>
<p>Nexus Dashboard allows for monitoring of Inter-Site connectivity. </p>
<p>On the Left navigation page click <strong>"Dashboard"</strong> to go back to main Connectivity View. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image43.png" width = 800></p>
<p>Take a look into green line between AWS and Azure site(you can use use magnifying tool for better view). Green line indicated that all is fine with connectivity. </p>
<p>On the Left navigation page click <strong>"Infrastructure"</strong> -&gt; <strong>"Site Connectivity"</strong> and scroll down on a page. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image44.png" width = 300></p>
<p>Under the site list, locate "Show Connectivity Status" and click on it. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image45.png" width = 800></p>
<p>Check the connectivity status for both <strong>BGP EVPN</strong> as well as <strong>Tunnel Status.</strong> There should be 4 UP BGP sessions, as well as 4 Tunnels which are <strong>UP</strong> between Sites.</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image46.png" width = 800></p>
<h2 id="infra-config-msite-inter-site-connectivity-veryfication-cloud-routers">Inter-site connectivity veryfication  (Cloud Routers)</h2>
<h3 id="infra-config-msite-1-ipsec-tunnel-veryfication">1. IPSec tunnel veryfication</h3>
<p>Open Putty client from desktop and put IP address of Cloud router. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cloud Routers IP address are avaibale in POD details IP address schema.</p>
</div>
<p>Login with username <strong>"csradmin"</strong> and password <strong>"CiscoLive2023!"</strong></p>
<p>Execute command <strong>"show ip int brief | include Tunnel"</strong></p>
<div class="highlight"><pre><span></span><code>show ip int brief | include Tunnel
</code></pre></div>
<p>Expected output: </p>
<div class="highlight"><pre><span></span><code>ct_routerp_eu-central-1_0_0#show ip int brief | include Tunnel
Tunnel0                10.10.0.52      YES unset  up                    up      
Tunnel1                169.254.112.1   YES NVRAM  up                    up      
Tunnel6                192.168.255.4   YES NVRAM  up                    up      
Tunnel7                192.168.255.2   YES NVRAM  up                    up      
ct_routerp_eu-central-1_0_0#
</code></pre></div>
<p>Verify that all 4 tunnels are up/up. </p>
<p>Tunnel0 is addressed from TEP pool of our Cloud Contoller Fabric and it's used for communication between CNC and Cloud Router. </p>
<p>Tunnel1 is a connected to inside of a Cloud. Depends on the provider - it's an Azure Load Balancer or AWS Transit Gateway and routing will be injected to send traffic towards VNETs and VPC CIDRs. </p>
<p>Tunnel6 and Tunnel7 are configured towards two (2) Catalyst 8000V Routers in another site. Note also that Tunnel6 and Tunnel7 are addressed from IPSec subnet which was specified in the beginning of Multiste Configuration.</p>
<h3 id="infra-config-msite-2-ospf-adjacency-veryfication">2. OSPF adjacency veryfication</h3>
<p>Execute command <strong>"show ip ospf neighbor"</strong></p>
<div class="highlight"><pre><span></span><code>show ip ospf neighbor
</code></pre></div>
<p>Expected output: </p>
<div class="highlight"><pre><span></span><code>ct_routerp_eu-central-1_0_0#show ip ospf neighbor

Neighbor ID     Pri   State           Dead Time   Address         Interface
10.20.0.20        0   FULL/  -        00:00:33    192.168.255.3   Tunnel7
10.20.0.68        0   FULL/  -        00:00:38    192.168.255.5   Tunnel6
ct_routerp_eu-central-1_0_0#
</code></pre></div>
<p>Verify that both sessions are in <strong>FULL</strong> State. OSPF Neighbourship allows for prefixes exchange, so BGP session can be build. </p>
<h3 id="infra-config-msite-2-bgp-evpn-veryfication">2. BGP EVPN veryfication</h3>
<p>Execute command <strong>"show bgp l2vpn evpn summary"</strong></p>
<div class="highlight"><pre><span></span><code>show bgp l2vpn evpn summary
</code></pre></div>
<p>Expected output: </p>
<div class="highlight"><pre><span></span><code>ct_routerp_eu-central-1_0_0#show bgp l2vpn evpn summary 
BGP router identifier 10.10.0.20, local AS number 65110
BGP table version is 1, main routing table version 1

Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
10.20.0.52      4        65200      96      94        1    0    0 01:22:47        0
10.20.0.116     4        65200      95      94        1    0    0 01:22:52        0
ct_routerp_eu-central-1_0_0#
</code></pre></div>
<p>Verify that both sessions are Up (O in "State/PfxRcd" column)</p>
<p><strong>In Next Section our First Tenant will be configured!</strong></p></section><h1 class='nav-section-title-end'>Ended: INFRA Configuration</h1>
                        <h1 class='nav-section-title' id='section-tenant-configuration'>
                            Tenant configuration <a class='headerlink' href='#section-tenant-configuration' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="ndo-tenant"><h1 id="ndo-tenant-nexus-dasboard-orchestrator-tenant-configuration">Nexus Dasboard Orchestrator Tenant configuration</h1>
<p>In this section we will configure our first Tenant, stretched between Azure and AWS. As Cloud Network Controller will be used for configuration, we need to make sure that CNC has privillages to make configuration changes in cloud providers. Will learn how to do it and when we need it. </p>
<p>Following diagram shows what is to about to be configured. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image49a.png" width = 800></p>
<h2 id="ndo-tenant-tenant-creation-on-ndo">Tenant Creation on NDO</h2>
<p>On the Left navigation page click <strong>"Application Management" -&gt; "Tenant"</strong> and then <strong>"Add Tenant"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image50.png" width = 800></p>
<p>Fill in Tenant details for name and description </p>
<ul>
<li>Display Name: <strong>Tenant-01</strong></li>
<li>Descrption: <strong>CL23 AMS Tenant-01</strong></li>
</ul>
<p>Associate Tenant to both Sites by checking the checkbox next to it. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image51.png" width = 800></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For now you are not able to <strong>Save</strong> this configuration with red marking on both Sites. Click the <strong>Pencil</strong> button at the end of each site line to complete configuration. </p>
<p>Additional setting are needed for CNC, so it knows which subscribtion to use on Azure and which Tenant ID on AWS. </p>
</div>
<p><strong>CNC-Azure-01 site configuration</strong></p>
<p>For Azure site, we will be using the same <strong>Subscription</strong> as the one used for CNC deployment - select <strong>Mode</strong> as <strong>"Select Shared"</strong> and use existing subscription from drop-down. Leave security domains empty. Hit <strong>Save</strong>. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image52.png" width = 800></p>
<p><strong>CNC-AWS-01 site configuration</strong></p>
<p>For AWS site we have 2 options - <strong>Untrusted</strong> with Cloud Access key and Secret or <strong>Trusted</strong>. In our case we would be using Trusted configuration. </p>
<p>Each Tenant created on NDO associated to AWS Cloud required sepearete Account ID on AWS site. You can find your in POD Details under following Appendix </p>
<p>Fill in with your POD <strong> AWS User-Account ID</strong> and select <strong>Access Type</strong> as <strong>Trusted</strong>, hit <strong>Save</strong>. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image53.png" width = 800></p>
<p>Now configuration can be saved, leave assocaited user list empty as there are no additional users and hit <strong>Save</strong>.</p>
<p>On the Tenant list you should see <strong>Tenant-01</strong> created an assigned to 2 Sites. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image54.png" width = 800></p>
<p>In next step we will make AWS trust configuration, so CNC can make changes to AWS objects. This step is not needed for Azure, as we are using shared subscription model, so access for CNC to manage Azure components was granted as part of infrastructure configuration. </p>
<p>You can find details about this process under <strong>Resources</strong> in <strong>Appendixes</strong> section of this Lab Guide. </p></section><section class="print-page" id="aws-trust"><h1 id="aws-trust-nexus-dasboard-orchestrator-tenant-aws-trust-configuration">Nexus Dasboard Orchestrator Tenant AWS Trust Configuration</h1>
<p>In previus step we have selected Tenant configuration Mode as Trusted, so now trust needs to be made for Cloud Network Controller to have access to AWS Account. </p>
<h2 id="aws-trust-aws-user-account-login">AWS User Account Login</h2>
<p>Each User POD has two(2) AWS Accounts. </p>
<ul>
<li>1st for Infrastrucre Configuration </li>
<li>2nd for Tenant Configuration </li>
</ul>
<p>Open AWS console via browser </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As you are already logged into AWS for Infrastructure Account, you can logout or use Incognito Mode (preferably), or different browser. </p>
</div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image3.png" width = 400></p>
<p>Select IAM user, provide Account ID and hit "Next" </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For this login please use AWS User Account ID from POD details</p>
</div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image4.png" width = 300></p>
<p>Provide Username and password and hit "Sign In" </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image5.png" width = 300></p>
<p>You will land on the welcome page of AWS cloud console. </p>
<h2 id="aws-trust-aws-cloud-network-controller-login">AWS Cloud Network Controller Login</h2>
<p>Using the IP of AWS Cisco Clout Network Controller (can be found in POD deatils), connect via browser to CNC GUI for AWS instance. Make sure to use the same browser in which you logged in for AWS User Tenant. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The trust configuration CloudFormation script needs to be executed on AWS User Account! </p>
</div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image60.png" width = 300></p>
<p>Provide Credentials and hit <strong>Login</strong></p>
<ul>
<li>Username: admin </li>
<li>Password: CiscoLive2023! </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image61.png" width = 800></p>
<p>Hit <strong>"Get started"</strong> to view Cloud Network Controller Dashboard. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image62.png" width = 800></p>
<p>Look on the <strong>Dashboard -&gt; Application Management -&gt; Tenants</strong>, we can see newly create tenant on the list. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image63.png" width = 800></p>
<p>Double-click the Tenant name <strong>"Tenant-01"</strong> to open it. </p>
<p>Under the <strong>AWS Account</strong> section there is warning related to our Trust configuration, along with the <strong>"Run the CloudFormation Template"</strong> hyperlink. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you have executed CloudFormation link from AWS User Tenant!</p>
</div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image64.png" width = 800></p>
<p>Click on the hyperlink to run CloudFormation Script. You will be then redirected to AWS console CloudFormation Stack configuration. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image65.png" width = 800></p>
<p>All the parameters are already filled in, hit <strong>"Next"</strong> to continue. </p>
<p>In <strong>Specify stack details</strong> step - fill in stack name and hit <strong>"Next"</strong></p>
<ul>
<li>Stack Name: <strong>CNC-AWS-Trust</strong></li>
<li>Parameters: none</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image66.png" width = 800></p>
<p>In <strong>Configure stack options</strong> step - leave all options as default and hit <strong>"Next"</strong></p>
<p>In <strong>Review CNC-AWS-Trust</strong> step - leave all options as default, scroll down to <strong>"Capabilities"</strong> section and check the checkbox for resource creation and hit <strong>"Submit"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image67.png" width = 800></p>
<p>After couple of seconds(use refresh button) - stack will be completed and we are good to go. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image68.png" width = 800></p>
<p>After AWS trust configuration we have our Infrastruture and first Tenant ready to be used. In next section of the Lab we will procced to Use-Cases configuration. Three(3) use-case we are about to configure are presenting typical real-life scenearios. </p></section><h1 class='nav-section-title-end'>Ended: Tenant configuration</h1>
                        <h1 class='nav-section-title' id='section-use-cases'>
                            Use-cases <a class='headerlink' href='#section-use-cases' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="use-case1"><h1 id="use-case1-use-case-01-stretched-vrf">Use-case 01 - Stretched VRF</h1>
<p><strong>Previous tasks were focusing on infrastructure configuration, from now on infrastructure is ready and will be working on logical topology.</strong></p>
<p>First use-case task will focus on:</p>
<ul>
<li>Configuration of stretched VRF inside Tenant-01</li>
<li>VPC CIDR(AWS), VNET(Azure) configuration in respective Clouds</li>
<li>EPG configuration in both Clouds </li>
<li>EC2/Virtual Machine creation and EPG assigment </li>
<li>Contract configuration to allow traffic flow </li>
<li>Communication testing </li>
</ul>
<h2 id="use-case1-schema-template-configuration">Schema, Template configuration</h2>
<p>All logical polices and configuration are done in Nexus Dashboard via Schemas and Templates. Each Schema can have multiple Templates, but Template can belong to only one Schema. Each Template is also assocaited to one and only one Tenant. Template to site assoction will also define to which fabric (on prem or cloud) configration will be pushed, therefore is the smallest logical unit we can decide where changes are deployed. </p>
<h3 id="use-case1-1-schema-creation">1. Schema creation</h3>
<p>Navigate to <strong>Dashboard -&gt; Application Management -&gt; Schemas</strong>, then hit <strong>"Add Schema"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image70.png" width = 800></p>
<p>Add Schema name and Description and hit <strong>"Add"</strong> button</p>
<ul>
<li>Name: <strong>Schema-T01</strong> </li>
<li>Description: <strong>Schema for Tenant-01</strong></li>
</ul>
<h3 id="use-case1-2-template-creation">2. Template creation</h3>
<p>Under the Schema-T01, let's create first Template with <strong>"Add New Template"</strong> button</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image71.png" width = 800></p>
<p>For a Template type select <strong>"ACI Multi-Cloud"</strong> and hit <strong>"Add"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image72.png" width = 800></p>
<p>On the right side of the template screen, we can customize the Tempalte Display Name, and also select Tenant. Add Display Name and Select a Tenant. </p>
<ul>
<li>Display Name: <strong>temp-stretch-01</strong></li>
<li>Tenant setting: <strong>Tenant-01</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image73.png" width = 800></p>
<h3 id="use-case1-3-template-to-site-association">3. Template to site association</h3>
<p>For configuration in template to be deployed, appropriate sites need to be added. Sites added will decide to which fabric configuration will be pushed. </p>
<p>For <strong>temp-stretch-01</strong>, we want to add both Azure and AWS sites. </p>
<p>To do it under the <strong>Template Properties</strong> locate the <strong>Actions</strong> button and hit <strong>Sites Associations</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image76.png" width = 800></p>
<p>Select both site <strong>CNC-AWS-01</strong> and <strong>CNC-Azure-01</strong> and hit <strong>Ok</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image77.png" width = 800></p>
<h2 id="use-case1-vrf-epg-selectors-deployment">VRF, EPG, selectors deployment</h2>
<h3 id="use-case1-1-vrf-configuration">1. VRF Configuration</h3>
<p>Inside <strong>Schema-T01</strong>, inside <strong>temp-stretch-01</strong> add the VRF with <strong>"Add VRF"</strong> button under <strong>VRFs</strong> box</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image74.png" width = 800></p>
<p>Add VRF Common Properties </p>
<ul>
<li>Display Name: <strong>VRF-01</strong> </li>
<li>Description: <strong>CL2023 Stretch VRF</strong></li>
</ul>
<p>Leave other as default. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image75.png" width = 800></p>
<p>As Tempalte was assocaited to both sites, we need to update details for each cloud, to do so under <strong>temp-stretch-01</strong> expand <strong>"Template Properties"</strong> and go to <strong>"CNC-AWS-01"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image78.png" width = 800></p>
<p>Click on the <strong>"VRF-01"</strong> which opens <strong>Site specific properties</strong> for this <strong>CNC-AWS-01 Site</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image79.png" width = 800></p>
<p>Under the <strong>"Template Properties"</strong> hit <strong>"Add Region"</strong> button and select <strong>Region</strong> from the list and then hit  <strong>"Add CIDRs"</strong> button </p>
<ul>
<li><strong>Region:</strong> eu-central-1</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image80.png" width = 800></p>
<p>Now we need to specify what subnet we would like to use in AWS cloud for that VPC. This subnet will be configure as VPC CIDR on AWS cloud and will be used for VM and endpoint addressing. </p>
<ul>
<li>CIDR: <strong>10.0.0.0/23</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image81.png" width = 800></p>
<p>Our CIDR also needs to be divided into subnets for respective <strong>Availability Zones (AZ)</strong> - hit <strong>"Add Subnet"</strong> to configure it. </p>
<p>We need to add subnet for a,b,c (number of AZ depends on the region), each subet needs to be confirmed with click on <strong>checkbox</strong> button.</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image82.png" width = 800></p>
<p>Create subnet for all 3 AZ in our Region, use non-virtual zone. </p>
<ul>
<li><strong>Subnet:</strong> 10.0.0.0/25      <strong>Name:</strong> az-1a-subnet <strong>AZ:</strong> eu-central-1a</li>
<li><strong>Subnet:</strong> 10.0.0.128/25    <strong>Name:</strong> az-1b-subnet <strong>AZ:</strong> eu-central-1b</li>
<li><strong>Subnet:</strong> 10.0.1.0/25      <strong>Name:</strong> az-1c-subnet <strong>AZ:</strong> eu-central-1c</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image83.png" width = 800></p>
<p>When done, hit <strong>"Save"</strong> button to save subnet configuration. </p>
<p>We also want to connect our subnets to Catalys8000V routers, this is done via Hub Network (Transit Gateway in AWS) - check the checkbox for <strong>"Hub Network"</strong>, select <strong>Hub Network</strong> and also all add all <strong>Subnets</strong> created before. </p>
<ul>
<li>Hub Network: <strong>TGW-HUB</strong></li>
<li>Subnets: <strong>10.0.0.0/25, 10.0.0.128/25, 10.0.1.0/25</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image84.png" width = 800></p>
<p>Hit ok to finish configuration for <strong>CNC-AWS-01</strong> fabric.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>AWS Transit Gateway(TGW) connects Amazon Virtual Private Clouds (VPCs) networks through a central hub. This connection simplifies network and puts an end to complex peering relationships. Transit Gateway acts as a highly scalable cloud router(don't be confused by naming - it's AWS internal cloud service and it's not related to Catalyst8000V routers which we also used call Cloud Routers). </p>
<p>In our case TGW are used to connect our <strong>User VPC</strong> with <strong>Infrastructure VPC</strong> where the Cloud Routers (Catalyst8000V) resides, this allows traffic flow between User Endpoints and Cloud Routes, so also for communication with another sites and also another AWS Regions. Selection of the subnet for Hub Network means that such subnet will be advertised to TGW, so traffic towards such subnet can flow. </p>
</div>
<p>Similar configuration has to be done for <strong>CNC-Azure-01</strong>.</p>
<p>Under <strong>temp-stretch-01</strong> expand <strong>"Tempalate Properties"</strong> and go to <strong>"CNC-Azure-01"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image85.png" width = 800></p>
<p>Click on the <strong>"VRF-01"</strong> which opens <strong>Site specific properties</strong> for this <strong>CNC-Azure-01 Site</strong></p>
<p>Under the <strong>"Tempalate Properties"</strong> hit <strong>"Add Region"</strong> button and select <strong>Region</strong> from the list and then hit  <strong>"Add CIDRs"</strong> button </p>
<ul>
<li><strong>Region:</strong> francecentral</li>
</ul>
<p>Now we need to specify what subnet we would like to use in AWS cloud for that VPC.</p>
<ul>
<li>CIDR: <strong>10.100.0.0/23</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image86.png" width = 800></p>
<p>Similar like for AWS we also needs to add subnet, but in case of Azure we don't need to select <strong>Availability Zones.</strong> We can add whole CIDR as subnet. When done, hit <strong>"Save"</strong> button to save subnet configuration. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image87.png" width = 800></p>
<p>In case of Azure cloud, connection to CNC VNET is done via <strong>"VNET Peering"</strong> feature - enable it and select <strong>"Default" Hub Network</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image88.png" width = 800></p>
<p>Hit ok to finish configuration for <strong>CNC-Azure-01</strong> fabric.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>VNET Peering - Virtual network peering enables you to seamlessly connect two or more Virtual Networks in Azure. The virtual networks appear as one for connectivity purposes. The traffic between virtual machines in peered virtual networks uses the Microsoft backbone infrastructure. Like traffic between virtual machines in the same network, traffic is routed through Microsoft's private network only.</p>
<p>In our case by enabling Hub Network in Azure, we are acutally peering our User Virtual Network (VRF-01) with Infrastructure Virtual Network(overlay-1) in which Cloud Routers resides to allow communication. </p>
</div>
<p>Under <strong>temp-stretch-01</strong> expand <strong>"Template Properties"</strong> and go to <strong>"Template Properties"</strong> main settings. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image89.png" width = 800></p>
<p>When done <strong>"Deploy to sites"</strong> button will become active (blue) - click to deploy VRF to respective sites. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image90.png" width = 800></p>
<p>Nexus Dashboard will also show what changes are to be made. Review those and hit <strong>Deploy</strong> button to push configuration. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image91.png" width = 800></p>
<p>If all goes well, confirmation pop-up will get displayed on the screen. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image92.png" width = 800></p>
<p>At this point in both Azure and AWS cloud, there will be VNET/VPC (respectively) created with defined addressing. </p>
<h3 id="use-case1-2-vrf-verification">2. VRF verification</h3>
<p>In the browser, open AWS console page. From the Region list, make sure that you have Frankfurt (eu-central-1) region selected. If not, switch to it. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image94.png" width = 800></p>
<p>Search for <strong>"VPC"</strong> resource in Search tool and open it. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image93.png" width = 800></p>
<p>You should have 2 VPCs created. </p>
<ul>
<li>context-[VRF-01]-addr-[10.0.0.0/23] - coresponding to NDO created VRF </li>
<li>default, without name, created automaticaly by AWS</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image95.png" width = 800></p>
<p>Let's check the same in Azure Cloud. Open the Azure Portal and login if needed. </p>
<p>Search for <strong>"Virtual Networks"</strong> in search bar</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image96.png" width = 800></p>
<p>As we are using shared subscribtion in this lab, there will be two(2) <strong>Virtual Networks:</strong> </p>
<ul>
<li>VRF-01 - corresponding to our created VRF </li>
<li>overlay-1 - infrastructure VNET in which CNC and Cloud Routers are connected </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image97.png" width = 800></p>
<h3 id="use-case1-3-additional-template-creation">3. Additional Template creation</h3>
<p>As per our topology diagram, EPGs in each Cloud are separate. As current <strong>temp-stretch-01</strong> is associated with both sites. We need to create two(2) new templates in the <strong>Schema-T01</strong> schema, for Azure and AWS cloud sites respectively. </p>
<p>Use the <strong>"Add new Template"</strong> and create 2 new templates with following names. Similar to first template from <strong>Actions</strong> menu associate to respective sites. </p>
<p><strong>AWS Template:</strong></p>
<ul>
<li>Template name: <strong>temp-AWS-01</strong></li>
<li>Template type: <strong>ACI Multi-Cloud</strong></li>
<li>Template Tenant: <strong>Tenant-01</strong></li>
<li>Site associated: <strong>CNC-AWS-01</strong></li>
</ul>
<p>Hit <strong>Save</strong> button to save the template. </p>
<p><strong>Azure Template:</strong></p>
<ul>
<li>Template name: <strong>temp-Azure-01</strong></li>
<li>Template type: <strong>ACI Multi-Cloud</strong> </li>
<li>Template Tenant: <strong>Tenant-01</strong></li>
<li>Site associated: <strong>CNC-Azure-01</strong></li>
</ul>
<p>Hit <strong>Save</strong> button to save the template. </p>
<h3 id="use-case1-4-application-profile-and-epg-configuration-for-aws">4. Application Profile and EPG Configuration for AWS</h3>
<p>ACI in Cloud doesn't use the concept of <strong>Bridge Domain</strong>, they don't have any representation in Cloud, that's why IP ranges were defined as part of the VRF configuration. </p>
<p><strong>EPGs</strong> can be now created and attached to VRF directly. </p>
<p>Navigate to <strong>temp-AWS-01</strong> template using <strong>View</strong> dropdown menu. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image100.png" width = 800></p>
<p>Add <strong>Application Profile</strong> using <strong>Add Application Profile</strong> button. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image101.png" width = 800></p>
<ul>
<li>Display Name: <strong>AppProf-AWS-01</strong></li>
<li>Description: <strong>Application Profile CL 2023 AWS</strong></li>
</ul>
<p>Hit <strong>Save</strong></p>
<p>Under created <strong>Application Profile</strong> add <strong>EPG</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image102.png" width = 800></p>
<ul>
<li>Display Name: <strong>EPG-AWS-01</strong></li>
<li>Description: <strong>EPG AWS CL 2023</strong> </li>
<li>EPG Type: <strong>Application</strong> </li>
</ul>
<p>Skip the <strong>"On-Premises Properties"</strong> and click on <strong>"Cloud Properties"</strong> and select <strong>"Virtual Routing &amp; Forwarding"</strong> as <strong>"VRF-01"</strong>. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image103.png" width = 500></p>
<p>We also need to add <strong>Selector</strong>. Selectors are used in Public Cloud to assign Virtual Machines and Endpoints to correct EPG represented by a Security Group. Selector should be added Under <strong>Site Specific</strong> configuration for each EPG. </p>
<p>Thare can be different type of selectores: </p>
<ul>
<li>IP based </li>
<li>TAG based</li>
<li>Region Based </li>
<li>Custom </li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Selectors should be designed in a way that's Instances/Service are matched by only one selector - different configuration will result in Fault. </p>
</div>
<p>In our case we will use <strong>IP based</strong> selectors. </p>
<p>Under <strong>Template Properties</strong> swtich to <strong>CNC-AWS-01</strong> Site, click on <strong>EPG-AWS-01</strong> and hit <strong>"Add Selector"</strong> button under the EPG Cloud Properties. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image104.png" width = 800></p>
<p>Selector details: </p>
<ul>
<li>Endpoint Selector Name: <strong>AWS-sel</strong></li>
<li>
<p>Expression: </p>
<ul>
<li>Type: <strong>IP address</strong></li>
<li>Operator: <strong>Equals</strong></li>
<li>Value: <strong>10.0.0.0/23</strong></li>
</ul>
</li>
</ul>
<p>Hit checkbox sign to save expression and then <strong>Ok</strong> to finish. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image105.png" width = 500></p>
<p>Under <strong>Template Properties</strong> swtich back to <strong>Template Properties</strong> and hit <strong>"Deploy to sites"</strong> and <strong>"Deploy"</strong>. </p>
<p>Once done confirmation will pop up on the screen. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image106.png" width = 500></p>
<h3 id="use-case1-5-application-profile-and-epg-configuration-for-azure">5. Application Profile and EPG Configuration for Azure</h3>
<p>Navigate to <strong>temp-Azure-01</strong> template using <strong>View</strong> dropdown menu. </p>
<p>Add <strong>Application Profile</strong> using <strong>Add Application Profile</strong> button. </p>
<ul>
<li>Display Name: <strong>AppProf-Azure-01</strong></li>
<li>Description: <strong>Application Profile CL 2023 Azure</strong></li>
</ul>
<p>Hit <strong>Save</strong></p>
<p>Under created <strong>Application Profile</strong> add <strong>EPG</strong></p>
<ul>
<li>Display Name: <strong>EPG-Azure-01</strong></li>
<li>Description: <strong>EPG Azure CL 2023</strong> </li>
<li>EPG Type: <strong>Application</strong> </li>
</ul>
<p>Skip the <strong>"On-Premises Properties"</strong> and click on <strong>"Cloud Properties"</strong> and select <strong>"Virtual Routing &amp; Forwarding"</strong> as <strong>"VRF-01"</strong>. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image110.png" width = 800></p>
<p>We also need to add <strong>Selector</strong> for Azure EPG. Selectors are used in Public Cloud to assign Virtual Machines and Endpoints to correct EPG represented by a <strong>Application Security Group</strong>. Selector should be added Under <strong>Site Specific</strong> configuration for each EPG. </p>
<p>Under <strong>Template Properties</strong> swtich to <strong>CNC-Azure-01</strong> Site, click on <strong>EPG-Azure-01</strong> and hit <strong>"Add Selector"</strong> button under the EPG Cloud Properties. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image111.png" width = 800></p>
<p>Selector details: </p>
<ul>
<li>Endpoint Selector Name: <strong>Azure-sel</strong></li>
<li>
<p>Expression: </p>
<ul>
<li>Type: <strong>IP address</strong></li>
<li>Operator: <strong>Equals</strong></li>
<li>Value: <strong>10.100.0.0/23</strong></li>
</ul>
</li>
</ul>
<p>Hit checkbox sign to save expression and then <strong>Ok</strong> to finish. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image112.png" width = 500></p>
<p>Under <strong>Template Properties</strong> swtich back to <strong>Template Properties</strong> and hit <strong>"Deploy to sites"</strong> and <strong>"Deploy"</strong>. </p>
<p>Once done confirmation will pop up on the screen. </p>
<p><strong>At this point we have created Tenant, VRF, EPGs and selectors - let's now add Virtual Machines/EC2 instances to test traffic flow.</strong></p>
<h2 id="use-case1-ec2vm-creation-and-verification">EC2/VM creation and verification</h2>
<p>Next step is creation of Vritual Machine/EC2 Instance in respective clouds for traffic verification. </p>
<h3 id="use-case1-1-aws-ec2-creation">1. AWS EC2 creation</h3>
<p>Login to AWS User tenant via https://console.aws.amazon.com and make sure that you have <strong>Frankfurt/eu-central-1</strong> region selected </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image115.png" width = 300></p>
<p>To be able to launch and login to VM we need to have SSH key-pair created. </p>
<p>In the search bar type <strong>"key pairs"</strong> and select Key Pairs from Features list. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image118.png" width = 600></p>
<p>Hit <strong>"Create key pair"</strong> in top right corner and provide following settings: </p>
<ul>
<li>Name: <strong>AWS-key-pair</strong></li>
<li>Key pair type: <strong>RSA</strong></li>
<li>Private key file format: <strong>.pem</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image119.png" width = 600></p>
<p>Hit "Create key pair" to finish. Once it's done key will be downloaded to your desktop, so you can use it for connection to VMs. Make sure to store it in know place on your desktop. </p>
<p>In the search bar type <strong>"EC2"</strong> and select EC2 from Service list. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image116.png" width = 600></p>
<p>On the EC2 Dashboard locate <strong>"Launch instance"</strong> and hit <strong>"Launch instance"</strong> option. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image117.png" width = 600></p>
<p>Instance details:</p>
<ul>
<li>Name: <strong>VM-AWS-01</strong></li>
<li>Application and OS Images: <strong>Amazon Linux</strong></li>
<li>Architecture: <strong>64-bit</strong> </li>
<li>Instance type: <strong>t2.micro</strong> </li>
<li>Key pair(login): <strong>AWS-key-pair</strong> </li>
<li>
<p>Network settings (hit Edit to change):</p>
<ul>
<li>VPC: <strong>context-[VRF-01]-addr[10.0.0.0/23]</strong></li>
<li>subnet: <strong>subnet-[10.0.0.0/25]</strong></li>
<li>Auto-assign public IP: <strong>Enable</strong></li>
<li>Firewall (security groups): <strong>leave default</strong></li>
</ul>
</li>
<li>
<p>Other setting leave default </p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image120.png" width = 800></p>
<p>Review summary and hit <strong>"Launch instance"</strong> to create Virtual Machine</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image121.png" width = 400></p>
<p>It may take 3-5 minutes for instance to be ready - you may jump to next step and deploy instance in Azure, then come back here for verification. </p>
<h3 id="use-case1-2-aws-ec2-verification">2. AWS EC2 verification</h3>
<p>Go back to EC2 -&gt; Instances and locate your EC2 machine. Click on Instance-ID of you machine to open it. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image122.png" width = 800></p>
<ul>
<li>Verify that VPC ID is correct </li>
<li>Verify that subnet is correct </li>
<li>Verify that instance has correct <strong>Private IPv4 addressess"</strong> </li>
</ul>
<p>Note down IP address of EC2 instance, we will need it for verification. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image123.png" width = 800></p>
<p>Go to Security tab settings of VM and check that <strong>Security groups</strong> for you instance is the one related to <strong>EPG-AWS-01</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image124.png" width = 800></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This security group was created when EPG configuration was deployed towards AWS site. Instance interfaces were assigned to this EPG/Security Group based on the IP based Selector configured for this EPG. Cloud Network Controller is monitoring resources created in managed Tenants and it's automatically assigning Security groupes based on selectors. </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After EC2 instance startup it may take some time for CNC to change security group to correct one. If no selector is matched, EC2 will be assigned to default Cloud Network Controller Secuirty Group will all traffic denied. </p>
</div>
<h3 id="use-case1-3-azure-virtual-machine-creation">3. Azure Virtual Machine creation</h3>
<p>Login to Azure portal via https://portal.azure.com with your account details</p>
<p>Search for <strong>Virtual machine</strong> in search bar and open from Services list </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image130.png" width = 800></p>
<p>Under <strong>Create</strong> button select <strong>"Azure virtual machine"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image131.png" width = 800></p>
<p>Virtual Machine details: </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If setting is not listed, leave default.</p>
</div>
<ul>
<li>Subscription: <strong>leave selected</strong> </li>
<li>Resource Group: <strong>hit create new and add with name "RG-CL23, then hit OK"</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image132.png" width = 400></p>
<ul>
<li>Virtual Machine name: <strong>VM-AZ-01</strong></li>
<li>Region: <strong>(Europe) France Central</strong> </li>
<li>
<p>Authentication type: <strong>Password</strong>  </p>
<ul>
<li>username: <strong>student</strong> </li>
<li>password: <strong>CiscoLive2023!</strong></li>
</ul>
</li>
</ul>
<p>Hit <strong>"Next: Disks &gt;"</strong> and accept all default values, hit <strong>"Next: Networking &gt;"</strong> and configure: </p>
<ul>
<li>Virtual Network: <strong>VRF-01</strong></li>
<li>Subnet: <strong>az-subnet (10.100.0.0/23)</strong></li>
<li>Public IP: <strong>leave default</strong></li>
</ul>
<p>Hit directly <strong>"Review + Create"</strong> and leave all other setting as default. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image133.png" width = 500></p>
<p>Hit directly <strong>"Create"</strong> to deploy Virtual Machine. </p>
<p>It may take 3-5 minutes for instance to be ready. Portal will notify you when done. </p>
<h3 id="use-case1-4-azure-virtual-machine-verification">4. Azure Virtual Machine verification</h3>
<p>Go back to <strong>Services -&gt; Virtual machines</strong> and locate your Virtual Machine. Click on the name to open it. </p>
<p>Under the <strong>"Settings"</strong>, go to <strong>"Networking"</strong> and then <strong>"Application Security groups (ASG)"</strong> and notice that Virtual Machine is assigned to <strong>"EPG-Azure-01_cloudapp-AppProf-Azure-01"</strong> securty group. Similarly like for AWS, this ASG was assigned due to Selector configuration for EPG. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image134.png" width = 800></p>
<h2 id="use-case1-cross-cloud-traffic-verification">Cross Cloud traffic verification</h2>
<p>Let's check if our Virtual Machines are able to communicate. For now we have configured that part of our infrastructure. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image140.png" width = 800></p>
<p>On the Azure Virtual Machine, scroll down to <strong>"Help"</strong> Section and select <strong>"Serial Console"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image141.png" width = 800></p>
<p>Hit enter and provide VM login credentials:</p>
<ul>
<li>username: <strong>student</strong> </li>
<li>password: <strong>CiscoLive2023!</strong></li>
</ul>
<p>Inside the console try to reach via ping to AWS EC2 IP address we noted earlier. </p>
<div class="highlight"><pre><span></span><code>student@VM-AZ-01:~$ ping 10.0.0.106
PING 10.0.0.106 (10.0.0.106) 56(84) bytes of data.

--- 10.0.0.106 ping statistics ---
7 packets transmitted, 0 received, 100% packet loss, time 6134ms
student@VM-AZ-01:~$
</code></pre></div>
<p>It doesnt work, what is expected as we didn't connect our two EPGs via contract. So even they are part of the same VRF, they are not able to communicate, as exactly same principles as on ACI applies. </p>
<p><strong>Let's add contract to allow communication.</strong></p>
<h2 id="use-case1-contract-configuration">Contract configuration</h2>
<h3 id="use-case1-1-filter-creation">1. Filter creation</h3>
<p>In order to create Contract, we need to have a filter which defines what type of traffis is allowed or denied under specyfic contract subject. Filter can define what ports and protocols are matched by specyfic rule.</p>
<p>Open Nexus Dashboard Orchestrator GUI then go to <strong>Application Management -&gt; Schemas -&gt; "Schema-T01"</strong> -&gt; open </p>
<p>Under View select <strong>"temp-stretch-01"</strong> and <strong>"Add filter"</strong> under <strong>Filter</strong> section. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image143.png" width = 800></p>
<ul>
<li>Display Name: <strong>permit-any</strong> </li>
</ul>
<p>Then click <strong>"Add entry"</strong> to define protocols and ports. </p>
<ul>
<li>Name: <strong>permit-any</strong> </li>
</ul>
<p>Leave rest setting as default - this will allow for all protocols and ports, but we could limit traffic to very specific conditions. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image144.png" width = 600></p>
<p>Hit <strong>Ok</strong> to save it. </p>
<h3 id="use-case1-2-contract-configuration">2. Contract configuration</h3>
<p>As contracts will be used to connect AWS EPG to Azure EPG, contract should be created in stretched template so it's deployed in both sites. </p>
<p>Under View select <strong>"temp-stretch-01"</strong> and <strong>"Add contract"</strong> under <strong>Contract</strong> section. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image142.png" width = 800></p>
<p>Create two(2) contracts with following details: </p>
<ul>
<li>
<p>Contract <strong>con-AWS-01-to-Azure-01</strong> </p>
<ul>
<li>Display Name: <strong>con-AWS-01-to-Azure-01</strong> </li>
<li>Scope: <strong>VRF</strong></li>
<li>Apply both direction: <strong>yes</strong></li>
<li>Add Filter: <strong>permit-any</strong></li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image145.png" width = 800></p>
<p>Hit <strong>Save</strong> to finish contract configuration. </p>
<ul>
<li>
<p>Contract <strong>con-Azure-01-to-AWS-01</strong> </p>
<ul>
<li>Display Name: <strong>con-Azure-01-to-AWS-01</strong> </li>
<li>Scope: <strong>VRF</strong></li>
<li>Apply both direction: <strong>yes</strong></li>
<li>Add Filter: <strong>permit-any</strong></li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image146.png" width = 800></p>
<p>Hit <strong>Save</strong> to finish contract configuration. </p>
<p>Hit <strong>Deploy to sites</strong> for contracts to be pushed. </p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Even the checkbox for "Apply both direction" is enabled, we still need 2 contracts between Cloud EPGs. This configuration is coming from the fact that Consumed Contracts are adding Outbound/Outgoing rules and Provided Contracts are adding Inband/Incoming rules, so with one contract we would only allow for traffic to be initiated from consumer EPG. We could use the same contract in both direction (each EPG would then provide and consume the same contract), but it's not a best practice as may lead to unwanted traffic leaking and complicate troubleshooting. </p>
</div>
<h3 id="use-case1-2-contract-assigment-to-epgs">2. Contract assigment to EPGs</h3>
<p>Just creation of contract doesn't have any impact on the traffic. Contract needs to have at least one Provider EPG and one Consumer EPG to allow communication between them. </p>
<p>Under View select <strong>"temp-AWS-01"</strong> click on the <strong>EPG-AWS-01</strong> and under EPG specific setting locate <strong>Contract</strong> section</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image150.png" width = 800></p>
<p>Hit <strong>"Add Contract"</strong> button and add the following</p>
<p>Contract 1: </p>
<ul>
<li>EPG: <strong>EPG-AWS-01</strong></li>
<li>Contract: <strong>con-AWS-01-to-Azure-01</strong></li>
<li>Type: <strong>provider</strong> </li>
</ul>
<p>Contract 2: </p>
<ul>
<li>EPG: <strong>EPG-AWS-01</strong></li>
<li>Contract: <strong>con-Azure-01-to-AWS-01</strong></li>
<li>Type: <strong>consumer</strong> </li>
</ul>
<p>Hit <strong>Deploy to sites</strong> for contracts to be applied to EPGs. </p>
<p>Under View select <strong>"temp-Azure-01"</strong> click on the <strong>EPG-Azure-01</strong> and under EPG specific setting locate <strong>Contract</strong> section</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image151.png" width = 800></p>
<p>Hit <strong>"Add Contract"</strong> button and add the following</p>
<p>Contract 1: </p>
<ul>
<li>EPG: <strong>EPG-Azure-01</strong></li>
<li>Contract: <strong>con-Azure-01-to-AWS-01</strong></li>
<li>Type: <strong>provider</strong> </li>
</ul>
<p>Contract 2: </p>
<ul>
<li>EPG: <strong>EPG-Azure-01</strong></li>
<li>Contract: <strong>con-AWS-01-to-Azure-01</strong></li>
<li>Type: <strong>consumer</strong> </li>
</ul>
<p>Hit <strong>Deploy to sites</strong> for contracts to be applied to EPGs. </p>
<h2 id="use-case1-cross-cloud-traffic-verification-attempt-2">Cross Cloud traffic verification attempt 2</h2>
<p>Let's check now if our Virtual Machines are able to communicate. For now we have configured that part of our infrastructure. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image152.png" width = 800></p>
<p>On the Azure Virtual Machine, scroll down to <strong>"Help"</strong> Section and select <strong>"Serial Console"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image141.png" width = 800></p>
<p>Hit enter and provide VM login credentials:</p>
<ul>
<li>username: <strong>student</strong> </li>
<li>password: <strong>CiscoLive2023!</strong></li>
</ul>
<p>Once in the console try to reach via ping to AWS EC2 IP address we noted earlier. </p>
<div class="highlight"><pre><span></span><code>student@VM-AZ-01:~$ ping 10.0.0.106
PING 10.0.0.106 (10.0.0.106) 56(84) bytes of data.
64 bytes from 10.0.0.106: icmp_seq=1 ttl=252 time=14.7 ms
64 bytes from 10.0.0.106: icmp_seq=2 ttl=252 time=12.1 ms
64 bytes from 10.0.0.106: icmp_seq=3 ttl=252 time=12.2 ms
64 bytes from 10.0.0.106: icmp_seq=4 ttl=252 time=11.9 ms
64 bytes from 10.0.0.106: icmp_seq=5 ttl=252 time=12.1 ms
^C
--- 10.0.0.106 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4007ms
rtt min/avg/max/mdev = 11.893/12.598/14.707/1.060 ms
student@VM-AZ-01:~$
</code></pre></div>
<p>Contract configuration makes communication possible. </p>
<h2 id="use-case1-cross-cloud-traffic-infrastructure-check">Cross Cloud traffic infrastructure check</h2>
<p>Let's check now what was configured in the infrastructure that traffic between Cloud Providers can flow. </p>
<h3 id="use-case1-azure-cloud-verification">Azure Cloud verification</h3>
<p>Go back to <strong>Services -&gt; Virtual machines</strong> and locate your Virtual Machine. Click on the name to open it. </p>
<p>Under the <strong>"Settings"</strong>, go to <strong>"Networking"</strong> and then take a look in <strong>Inbound port rules</strong> and <strong>Outband port rules</strong>. </p>
<p>Our contract configuration added one more rule to the port rules which allows for communication with CIDR of AWS Cloud. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image153.png" width = 800></p>
<p>Under the <strong>"Settings"</strong>, go to <strong>"Networking"</strong> locate the <strong>"Network Interface"</strong> and click on it's ID - <strong>vm-az-01756</strong> in this case </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image154.png" width = 800></p>
<p>Under the <strong>Network Interface</strong> locate the <strong>Help Section</strong> in left navigation menu and select <strong>"Effective Routes"</strong> tab </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image155.png" width = 800></p>
<p>It may take couple of second to load, once loaded scroll down to the end of the list and notice one <strong>User</strong> Route added. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image156.png" width = 800></p>
<p>You can see that subnet representing <strong>AWS CIDR space - 10.0.0.0/23</strong> is routed to <strong>Virtual Appliance</strong> which is an <strong>Internal Load Balancer</strong> balancing the traffic between 2 Cloud Routers in Azure overlay-1 VPC. </p>
<p>With that configuration, traffic is send to <strong>Azure Cloud Routers</strong> from which via <strong>IPSec tunnels</strong> is send to <strong>AWS Cloud Routers</strong> and towards destination AWS VPC. </p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In "Effective routes" output there are quite a few routes with "Default" source. Those were added by Microsoft and typicaly respresenting internal services. Next-hop set to "None" means that traffic towards those subnets is silently dropped. </p>
</div>
<h3 id="use-case1-aws-cloud-verification">AWS Cloud verification</h3>
<p>Login to AWS user tenant via https://console.aws.amazon.com and make sure that you have <strong>Frankfurt/eu-central-1</strong> region selected </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image115.png" width = 300></p>
<p>In the search bar type <strong>"Subnet"</strong> and select <strong>Subnet (VPC feature)</strong> from Features list. </p>
<p>Locate you subnet <strong>subnet-[10.0.0.0/25]</strong> and click on <strong>Subnet ID</strong> assocaited to open that subnet. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image160.png" width = 800></p>
<p>On the subnet details page, scroll down and locate <strong>"Route Table"</strong> tab, click on it </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image161.png" width = 800></p>
<p>Notice that there was route added for <strong>Azure VNET space - 10.100.0.0/23</strong> towards <strong>"tgw-*"</strong> which is our Transit Gateway used to communicated with <strong>AWS Cloud Routers</strong>, so traffic can be send to Azure. </p>
<h3 id="use-case1-cloud-routers-verification">Cloud Routers verification</h3>
<p>Let's check what was configured on Cloud Routers, so traffic can flow, will take a look on one of it as an example. </p>
<p>Open Putty client from desktop and put IP address of Cloud router from Azure - <strong>ct_routerp_francecentral_0_0</strong> </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cloud Routers IP addresses are available in POD details section, or you can find them in Azure/AWS console directly. </p>
</div>
<p>Login with username <strong>csradmin</strong> and password <strong>CiscoLive2023!</strong></p>
<p>Execute command <strong>"show vrf | inc VRF-01</strong></p>
<div class="highlight"><pre><span></span><code>show vrf | inc VRF-01
</code></pre></div>
<p>Expected output (IP addressing might differ):</p>
<div class="highlight"><pre><span></span><code>ct-routerp-francecentral-0-0#show vrf | inc VRF-01
    Tenant-01:VRF-01                 10.20.0.52:7          ipv4        BD7
ct-routerp-francecentral-0-0#
</code></pre></div>
<p>Check the routing table for that VRF </p>
<p>Execute command <strong>"show ip route vrf Tenant-01:VRF-01</strong></p>
<div class="highlight"><pre><span></span><code>show ip route vrf Tenant-01:VRF-01
</code></pre></div>
<p>Expected output: </p>
<div class="highlight"><pre><span></span><code>ct-routerp-francecentral-0-0#show ip route vrf Tenant-01:VRF-01

Routing Table: Tenant-01:VRF-01
[output truncated]
Gateway of last resort is not set

    10.0.0.0/23 is subnetted, 2 subnets
B        10.0.0.0 [20/0] via binding label: 0x3000001, 1d21h
                  [20/0] via binding label: 0x3000002, 1d21h
S        10.100.0.0 [1/0] via 10.20.0.1, GigabitEthernet2
      192.168.100.0/24 is variably subnetted, 2 subnets, 2 masks
C        192.168.100.0/24 is directly connected, BDI7
L        192.168.100.100/32 is directly connected, BDI7
ct-routerp-francecentral-0-0#
</code></pre></div>
<p>Output shows routing table from perspective of Azure Cloud Router, what we can see:</p>
<ul>
<li><strong>Azure subnet 10.100.0.0/23</strong> is available via <strong>Static route</strong> towards interfaces <strong>GigabitEthernet2</strong>, which is interfaces conencted to inside of Azure network </li>
<li><strong>AWS subnet 10.0.0.0/23</strong> is available from <strong>BGP protocol</strong>, from two (2) Cloud Routers located in AWS Cloud </li>
</ul>
<p>In that way cloud routers know how to route traffic towards respective clouds. </p>
<p>This verification finishes the Use-case-01 configuration in which we have deployed our VRF, EPGs, contracts and EC2s/VMs. We have also checked how configration done via NDO is reflected as Cloud Native objects in respective clouds. </p>
<p>In next section we will deploy Internet Gateway to allow for internet communication.</p></section><section class="print-page" id="use-case2"><h1 id="use-case2-use-case-02-internet-gateway">Use-case 02 - Internet Gateway</h1>
<p><strong>In this task we will configure Internet Gateway in AWS cloud, so EC2 instances and Endpoints are able to reach Internet.</strong></p>
<p>Instances in AWS can access Internet with help of Internet Gateway. An internet gateway is a horizontally scaled, redundant, and highly available VPC component that allows communication between VPC and the internet.</p>
<p>An internet gateway provides a target VPC route tables for internet-routable traffic. For communication using IPv4, the internet gateway also performs network address translation (NAT).</p>
<h2 id="use-case2-internet-gateway-as-external-epg">Internet Gateway as External EPG</h2>
<p>As all routing aspectes of VPC are controlled by Cloud Network Controller, also Internet Gateway(IGW) is configured with it's help. Internet Gateway is represented by well know ACI object - External EPG. Cloud Network Controller is fully automating creation and attachemnt of IGW to VPC, contracts are responsible for security rules, so administrators are in full controll of traffic flow. </p>
<h3 id="use-case2-external-epg-configuration">External EPG configuration</h3>
<p>Open Nexus Dashboard Orchestrator GUI and navigate to <strong>Application Management -&gt; Schemas -&gt; "Schema-T01"</strong> -&gt; open </p>
<p>Under View select <strong>"temp-AWS-01"</strong> and hit <strong>"Add External EPGs"</strong> under <strong>External EPGs</strong> section. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image172.png" width = 800></p>
<ul>
<li>Display Name: <strong>ExtEPG-IGW</strong></li>
<li>Description: <strong>Ext EPG for Internet Gateway AWS</strong> </li>
<li>Virutal Routing &amp; Forwarding: <strong>VRF-01</strong> </li>
<li>Select Site Type: <strong>CLOUD</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image174.png" width = 800>   </p>
<ul>
<li>
<p>Cloud Properties: </p>
<ul>
<li>Application Profile: <strong>AppProf-AWS-01</strong></li>
<li>
<p>Add Selector: </p>
<ul>
<li>Endpoint Selector Name: <strong>Internet</strong></li>
<li>Expression Type: <strong>IP Address</strong></li>
<li>Expression Operator: <strong>Equal</strong></li>
<li>Expression Value: <strong>0.0.0.0/0</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image173.png" width = 800>   </p>
<p>Hit <strong>Save</strong> to finish. </p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Adding the "0.0.0.0/0" subnet will add additional route to this prefix, pointing to internet gateway object create in AWS. In case only specyfic prefixes should be rechable, you can use differnt subnet that 0.0.0.0/0. </p>
</div>
<h3 id="use-case2-contract-configuration">Contract configuration</h3>
<p>As External EPG is functioning as any other EPG, contract configuration from EPG to External EPG is mandatory for traffic to be allowed. </p>
<h4 id="use-case2-1-filter-creation">1. Filter creation</h4>
<p>Open Nexus Dashboard Orchestrator GUI then go to <strong>Application Management -&gt; Schemas -&gt; "Schema-T01"</strong> -&gt; open </p>
<p>Under View select <strong>"temp-AWS-01""</strong> and <strong>"Add filter"</strong> under <strong>Filter</strong> section. </p>
<ul>
<li>Display Name: <strong>permit-any-aws</strong> </li>
</ul>
<p>Then click <strong>"Add entry"</strong> to define protocols and ports. </p>
<ul>
<li>Name: <strong>permit-any</strong> </li>
</ul>
<p>Leave rest setting as default - this will allow for all protocols and ports. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image144.png" width = 600></p>
<p>Hit <strong>Ok</strong> to save it. </p>
<h4 id="use-case2-2-contract-configuration">2. Contract configuration</h4>
<p>As contracts will be used to connect AWS EPG to ExtEPG of AWS, contract should be created in AWS template </p>
<p>Under View select <strong>"temp-AWS-01"</strong> and <strong>"Add contract"</strong> under <strong>Contract</strong> section. </p>
<p>Create two(2) contracts with following details: </p>
<ul>
<li>
<p>Contract <strong>con-AWS-01-to-IGW</strong> </p>
<ul>
<li>Display Name: <strong>con-AWS-01-to-IGW</strong> </li>
<li>Scope: <strong>VRF</strong></li>
<li>Apply both direction: <strong>yes</strong></li>
<li>Add Filter: <strong>permit-any-AWS</strong></li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image176.png" width = 800></p>
<p>Hit <strong>Save</strong> to finish contract configuration. </p>
<ul>
<li>
<p>Contract <strong>con-IGW-to-AWS-01</strong> </p>
<ul>
<li>Display Name: <strong>con-IGW-to-AWS-01</strong> </li>
<li>Scope: <strong>VRF</strong></li>
<li>Apply both direction: <strong>yes</strong></li>
<li>Add Filter: <strong>permit-any-AWS</strong></li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image175.png" width = 800></p>
<p>Hit <strong>Save</strong> to finish contract configuration. </p>
<p>Hit <strong>Deploy to sites</strong> for contracts to be pushed. </p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Having contract only in one direction where Internet Gateway is a provider will be enough for EC2 instances to reach Internet, however contract in opposite direction is needed in case you want to connect to EC2 instances Public IPv4 Addresses from Internet. </p>
</div>
<h4 id="use-case2-3-contract-assigment-to-epgs">3. Contract assigment to EPGs</h4>
<p>Under View select <strong>"temp-AWS-01"</strong> click on the <strong>EPG-AWS-01</strong> and under EPG specific setting locate <strong>Contract</strong> section</p>
<p>Hit <strong>"Add Contract"</strong> button and add the following</p>
<p>Contract 1: </p>
<ul>
<li>EPG: <strong>EPG-AWS01</strong></li>
<li>Contract: <strong>con-AWS-01-to-IGW</strong>*</li>
<li>Type: <strong>provider</strong> </li>
</ul>
<p>Contract 2: </p>
<ul>
<li>EPG: <strong>EPG-AWS-01</strong></li>
<li>Contract: <strong>con-IGW-to-AWS-01</strong></li>
<li>Type: <strong>consumer</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image177.png" width = 800></p>
<p>Under View select <strong>"temp-AWS-01"</strong> click on the <strong>ExtEPG-IGW</strong> and under <strong>Common Properties</strong> locate <strong>Contract</strong> section</p>
<p>Hit <strong>"Add Contract"</strong> button and add the following</p>
<p>Contract 1: </p>
<ul>
<li>EPG: <strong>ExtEPG-IGW</strong></li>
<li>Contract: <strong>con-IGW-to-AWS-01</strong></li>
<li>Type: <strong>provider</strong> </li>
</ul>
<p>Contract 2: </p>
<ul>
<li>EPG: <strong>ExtEPG-IGW</strong></li>
<li>Contract: <strong>con-AWS-01-to-IGW</strong></li>
<li>Type: <strong>consumer</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image178.png" width = 800></p>
<p>Hit <strong>Deploy to sites</strong> to create IGW and deploy contracts associations. </p>
<h2 id="use-case2-veryfication">Veryfication</h2>
<p>Let's check if AWS EC2 instance is now reachable from the internet. </p>
<h3 id="use-case2-1-open-aws-console-via-browser">1. Open AWS console via browser</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image3.png" width = 400></p>
<h3 id="use-case2-2-select-iam-user-provide-account-id-for-user-tenant-and-hit-next">2. Select IAM user,  provide Account ID for User tenant and hit "Next"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image4.png" width = 300></p>
<h3 id="use-case2-3-provide-username-and-password-and-hit-sign-in">3. Provide Username and password and hit "Sign In"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image5.png" width = 300></p>
<h3 id="use-case2-4-in-aws-search-bar-type-ec2-and-select-ec2-services-tab">4. In AWS Search Bar type "EC2" and Select "EC2" Services Tab</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image6.png" width = 800></p>
<h3 id="use-case2-5-from-resources-select-instances-running">5. From "Resources" select "Instances (Running)"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image7.png" width = 800></p>
<p>Locate Public IPv4 Address of EC2 instance, either on the EC2 instance list or under Details section</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image179.png" width = 800></p>
<p>From workstation open command line interface by hitting <strong>"Start"</strong> and typing <strong>"cmd"</strong>. If you are a Mac User, launch <strong>Terminal</strong>. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image180.png" width = 800></p>
<p>Execute command </p>
<div class="highlight"><pre><span></span><code>ping &lt;Public IPv4 address of EC2&gt;
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image181.png" width = 800></p>
<p>Communication is successfull now, EC2 instance has access to Internet via AWS Internet Gateway. </p>
<p>At this point we completed that part of our topology configuration. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image185.png" width = 800></p>
<p>In Next Section we will configure additional Tenant and try inter-tenant leaking. </p></section><section class="print-page" id="use-case3"><h1 id="use-case3-use-case-03-inter-tenant-routing">Use-case 03 - Inter-Tenant routing</h1>
<p>In this section we will expolore possibilites of Inter-tenant traffic flows. It's a very common scenario where multiple accounts/tenants in Public Cloud need to communicate with central one, where common service are deployed.  </p>
<p>Additional Tenant needs to be created for this ucs-case configuration. Azure only tenant will be used in this lab. Later in the lab we will configured inter-tenant leaking, so Virtual Machines from 2 tenants are able to talk to each other. </p>
<h2 id="use-case3-tenant-creation">Tenant creation</h2>
<p>On the Left navigation page click <strong>"Application Management" -&gt; "Tenant"</strong> and then <strong>"Add Tenant"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image50.png" width = 800></p>
<p>Fill in Tenant details for name and description </p>
<ul>
<li>Display Name: <strong>Tenant-Azure-02</strong></li>
<li>Descrption: <strong>CL23 Tenant-02 Azure</strong></li>
</ul>
<p>Associate Tenant to Azure CNC-Azure-01 Sites by checking the checkbox next to it. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image200.png" width = 800></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Similar as for first Tenant, we are not able to <strong>Save</strong> this configuration with red marking Site. Click the <strong>Pencil</strong> button at the end of each site line to complete configuration. </p>
<p>Additional setting are needed for CNC, so it knows which subscribtion. </p>
</div>
<p><strong>CNC-Azure-01 site configuration</strong></p>
<p>For Azure site, we will be using the same <strong>Subscription</strong> as previously - select <strong>Mode</strong> as <strong>"Select Shared"</strong> and use existing subscription from drop-down. Leave security domains empty. Hit <strong>Save</strong>. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image52.png" width = 800></p>
<p>As configuration will be done for new Tenant, new Schema, Template, VRF and all other logical objects have to be created. </p>
<h2 id="use-case3-schema-template-configuration">Schema, Template configuration</h2>
<h3 id="use-case3-1-schema-creation">1. Schema creation</h3>
<p>Navigate to <strong>Dashboard -&gt; Application Management -&gt; Schemas</strong>, then hit <strong>"Add Schema"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image201.png" width = 800></p>
<p>Add Schema name and Description and hit <strong>"Add"</strong> button</p>
<ul>
<li>Name: <strong>Schema-T02-Azure</strong> </li>
<li>Description: <strong>Schema for Tenant-Azure-02</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image202.png" width = 400></p>
<p>Let's now create template inside this schema. </p>
<h3 id="use-case3-2-template-creation">2. Template creation</h3>
<p>Under the Schema-T02-Azure, let's create first Template with <strong>"Add New Template"</strong> button</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image203.png" width = 800></p>
<p>For a Template type select <strong>"ACI Multi-Cloud"</strong> and hit <strong>"Add"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image72.png" width = 800></p>
<p>On the right side of the template screen, we can customize the Tempalte Display Name, and also select Tenant. Add Display Name and Select a Tenant. </p>
<ul>
<li>Display Name: <strong>temp-Azure-01</strong></li>
<li>Tenant setting: <strong>Tenant-02-Azure</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image204.png" width = 800></p>
<h3 id="use-case3-3-template-to-site-association">3. Template to site association</h3>
<p>For configuration in template to be deployed, appropriate sites need to be added. Sites added will decide to which fabric configuration will be pushed. </p>
<p>For <strong>temp-Azure-01</strong>, we want to add both Azure site only. </p>
<p>To do it under the <strong>Template Properties</strong> locate the <strong>Actions</strong> button and hit <strong>Sites Associations</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image205.png" width = 800></p>
<p>Select <strong>CNC-Azure-01</strong> site and hit <strong>Ok</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image206.png" width = 800></p>
<h2 id="use-case3-vrf-epg-selectors-deployment">VRF, EPG, selectors deployment</h2>
<h3 id="use-case3-1-vrf-configuration">1. VRF Configuration</h3>
<p>Inside <strong>Schema-T02-Azure</strong>, inside <strong>temp-Azure-01</strong> add the VRF with <strong>"Add VRF"</strong> button under <strong>VRFs</strong> box</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image207.png" width = 800></p>
<p>Add VRF Common Properties </p>
<ul>
<li>Display Name: <strong>T2-VRF-02</strong> </li>
<li>Description: <strong>CL2023 VRF-02</strong></li>
</ul>
<p>Leave other as default. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image208.png" width = 800></p>
<p>As Tempalte was assocaited to Azure site, we need to update details for it, to do so under <strong>temp-stretch-01</strong> expand <strong>"Template Properties"</strong> and go to <strong>"CNC-Azure-01"</strong> </p>
<p>Under <strong>temp-Azure-01</strong> expand <strong>"Tempalate Properties"</strong> and go to <strong>"CNC-Azure-01"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image209.png" width = 800></p>
<p>Click on the <strong>"T2-VRF-02"</strong> which opens <strong>Site specific properties</strong> for this <strong>CNC-Azure-01 Site</strong></p>
<p>Under the <strong>"Tempalate Properties"</strong> hit <strong>"Add Region"</strong> button and select <strong>Region</strong> from the list and then hit  <strong>"Add CIDRs"</strong> button </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image210.png" width = 800></p>
<ul>
<li><strong>Region:</strong> francecentral</li>
</ul>
<p>Now we need to specify what subnet we would like to use in AWS cloud for that VPC.</p>
<ul>
<li>CIDR: <strong>10.200.0.0/23</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image211.png" width = 800></p>
<p>Like previously we need to add subnet, which is whole CIDR. When done, hit <strong>"Save"</strong> button to save subnet configuration. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image212.png" width = 800></p>
<p>For traffic to flow between the Tenants, <strong>"VNET Peering"</strong> feature with <strong>"Default" Hub Network</strong> needs to be selected as well.</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image213.png" width = 800></p>
<p>Hit ok to finish configuration for <strong>CNC-Azure-01</strong> fabric.</p>
<p>Under <strong>temp-Azure-01</strong> expand <strong>"Template Properties"</strong> and go to <strong>"Template Properties"</strong> main settings. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image214.png" width = 800></p>
<p>When done <strong>"Deploy to sites"</strong> button will become active (blue) - click to deploy VRF to respective sites. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image215.png" width = 800></p>
<p>Nexus Dashboard will also show what changes are to be made. Review those and hit <strong>Deploy</strong> button to push configuration. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image216.png" width = 800></p>
<p>If all goes well, confirmation pop-up will get displayed on the screen. </p>
<h3 id="use-case3-2-application-profile-and-epg-configuration-for-azure">2. Application Profile and EPG Configuration for Azure</h3>
<p>Navigate to <strong>temp-Azure-01</strong> template using <strong>View</strong> dropdown menu. </p>
<p>Add <strong>Application Profile</strong> using <strong>Add Application Profile</strong> button. </p>
<ul>
<li>Display Name: <strong>AppProf-Azure-T2-01</strong></li>
<li>Description: <strong>Application Profile CL 2023 Azure T02</strong></li>
</ul>
<p>Hit <strong>Save</strong></p>
<p>Under created <strong>Application Profile</strong> add <strong>EPG</strong></p>
<ul>
<li>Display Name: <strong>EPG-Azure-02</strong></li>
<li>Description: <strong>EPG Azure CL 2023 T02</strong> </li>
<li>EPG Type: <strong>Application</strong> </li>
</ul>
<p>Skip the <strong>"On-Premises Properties"</strong> and click on <strong>"Cloud Properties"</strong> and select <strong>"Virtual Routing &amp; Forwarding"</strong> as <strong>"T2-VRF-02"</strong>. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image220.png" width = 800></p>
<p>We also need to add <strong>Selector</strong> for this EPG. Selector should be added Under <strong>Site Specific</strong> configuration for each EPG. </p>
<p>Under <strong>Template Properties</strong> swtich to <strong>CNC-Azure-01</strong> Site, click on <strong>EPG-Azure-02</strong> and hit <strong>"Add Selector"</strong> button under the EPG Cloud Properties. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image221.png" width = 800></p>
<p>Selector details: </p>
<ul>
<li>Endpoint Selector Name: <strong>Azure-sel-02</strong></li>
<li>
<p>Expression: </p>
<ul>
<li>Type: <strong>IP address</strong></li>
<li>Operator: <strong>Equals</strong></li>
<li>Value: <strong>10.200.0.0/23</strong></li>
</ul>
</li>
</ul>
<p>Hit checkbox sign to save expression and then <strong>Ok</strong> to finish. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image222.png" width = 500></p>
<p>Under <strong>Template Properties</strong> swtich back to <strong>Template Properties</strong> and hit <strong>"Deploy to sites"</strong> and <strong>"Deploy"</strong>. </p>
<p>Once done confirmation will pop up on the screen. </p>
<p><strong>At this point we have created Tenant, VRF, EPGs and selectors for our second Tenant - let's now add Virtual Machines instance.</strong></p>
<h2 id="use-case3-vm-creation">VM creation</h2>
<p>Creation of VM for Tenant-Azure-02 in Azure. </p>
<p>Login to Azure portal via https://portal.azure.com with your account details</p>
<p>Search for <strong>Virtual machine</strong> in search bar and open from Services list </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image130.png" width = 800></p>
<p>Under <strong>Create</strong> button select <strong>"Azure virtual machine"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image131.png" width = 800></p>
<p>Virtual Machine details: </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If setting is not listed, leave default.</p>
</div>
<ul>
<li>Subscription: <strong>leave selected</strong> </li>
<li>Resource Group: <strong>hit create new and add with name "RG-CL23-T02, then hit OK"</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image230.png" width = 400></p>
<ul>
<li>Virtual Machine name: <strong>VM-AZ-02</strong></li>
<li>Region: <strong>(Europe) France Central</strong> </li>
<li>
<p>Authentication type: <strong>Password</strong>  </p>
<ul>
<li>username: <strong>student</strong> </li>
<li>password: <strong>CiscoLive2023!</strong></li>
</ul>
</li>
</ul>
<p>Hit <strong>"Next: Disks &gt;"</strong> and accept all default values, hit <strong>"Next: Networking &gt;"</strong> and configure: </p>
<ul>
<li>Virtual Network: <strong>T2-VRF-02</strong></li>
<li>Subnet: <strong>az-subnet (10.200.0.0/23)</strong></li>
<li>Public IP: <strong>leave default</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image231.png" width = 400></p>
<p>Hit directly <strong>"Review + Create"</strong> and leave all other setting as default. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image232.png" width = 500></p>
<p>Hit directly <strong>"Create"</strong> to deploy Virtual Machine. </p>
<p>It may take 3-5 minutes for instance to be ready. Portal will notify you when done. </p>
<p><strong>Let's add contract to allow communication.</strong></p>
<h2 id="use-case3-contract-configuration">Contract configuration</h2>
<h3 id="use-case3-1-filter-creation">1. Filter creation</h3>
<p>In order to create Contract, we need to have a filter in this template also</p>
<p>Open Nexus Dashboard Orchestrator GUI then go to <strong>Application Management -&gt; Schemas -&gt; "Schema-T02-Azure"</strong> -&gt; open </p>
<p>Under View select <strong>"temp-Azure-01"</strong> and <strong>"Add filter"</strong> under <strong>Filter</strong> section. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image233.png" width = 800></p>
<ul>
<li>Display Name: <strong>permit-any</strong> </li>
</ul>
<p>Then click <strong>"Add entry"</strong> to define protocols and ports. </p>
<ul>
<li>Name: <strong>permit-any</strong> </li>
</ul>
<p>Leave rest setting as default - this will allow for all protocols and ports, but we could limit traffic to very specific conditions. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image144.png" width = 600></p>
<p>Hit <strong>Ok</strong> to save it. </p>
<h3 id="use-case3-2-contracts-configuration">2. Contracts configuration</h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Contract can have a different scope (Application Profile, VRF, Tenant, Global). Depneds on the use case, where are the providers and consumers located we should choose appropriate scope. In first two use-case providers and consumer were located in the same VRF, hence default <strong>VRF</strong> Scope was enough to cover provider and consumer. </p>
</div>
<p>In this Use-case, idea is to connect EPGs from different Tenants, hence scope for contract needs to be set to <strong>"Global"</strong>, as this is the only one which covers EPGs from different tenants. Also placement of contract is imporant.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If contract is to be used for connection of EPGs from different Tenants/VRFs, contract needs to be deployed in the Tenant were Provider of this contract is configured. </p>
</div>
<p>In our case contract where <strong>EPG-Azure-02</strong> from <strong>Tenant-Azure-02</strong> is to be a <strong>Provider</strong> will be created in <strong>"Schema-T02-Azure"</strong> and Tempalte <strong>"temp-Azure-01"</strong>. </p>
<p>Contract in opposite direction where <strong>EPG-Azure-01</strong> from <strong>Tenant-01</strong> is to be a <strong>Provider</strong> will be created in <strong>"Schema-T01"</strong> and Tempalte <strong>"temp-Azure-01"</strong>. </p>
<p><strong>Contracts configuration under Tenant-Azure-02</strong> </p>
<p>Under Schema <strong>"Schema-T02-Azure"</strong> navigate to <strong>View</strong> select <strong>"temp-Azure-01"</strong> and <strong>"Add contract"</strong> under <strong>Contract</strong> section. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image240.png" width = 800></p>
<p>Create contracts with following details: </p>
<ul>
<li>
<p>Contract <strong>con-Azure-02-to-Azure-01</strong> </p>
<ul>
<li>Display Name: <strong>con-Azure-02-to-Azure-01</strong> </li>
<li>Scope: <strong>Global</strong></li>
<li>Apply both direction: <strong>yes</strong></li>
<li>Add Filter: <strong>permit-any</strong></li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image241.png" width = 800></p>
<p>Hit <strong>Save</strong> to finish contract configuration. </p>
<p>Under Schema <strong>"Schema-T02-Azure"</strong> navigate to <strong>View</strong> select <strong>"temp-Azure-01"</strong> and under <strong>EPG-Azure-02</strong> specific setting locate <strong>Contract</strong> section</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image242.png" width = 800></p>
<p>Hit <strong>"Add Contract"</strong> button and add the following contract: </p>
<ul>
<li>EPG: <strong>EPG-Azure-02</strong></li>
<li>Contract: <strong>con-Azure-02-to-Azure-01</strong></li>
<li>Type: <strong>provider</strong> </li>
</ul>
<p>Hit <strong>Deploy to sites</strong> for contracts to be applied to EPGs. </p>
<p><strong>Let's now create contract in opposite direction.</strong></p>
<p>Under Schema <strong>"Schema-T01"</strong> navigate to <strong>View</strong> select <strong>"temp-stretch-01"</strong> and <strong>"Add contract"</strong> under <strong>Contract</strong> section. </p>
<p>Create contracts with following details: </p>
<ul>
<li>
<p>Contract <strong>con-Azure-01-to-Azure-02</strong> </p>
<ul>
<li>Display Name: <strong>con-Azure-01-to-Azure-02</strong> </li>
<li>Scope: <strong>Global</strong></li>
<li>Apply both direction: <strong>yes</strong></li>
<li>Add Filter: <strong>permit-any</strong></li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image247.png" width = 800> </p>
<p>Under Schema <strong>"Schema-T01"</strong>  navigate to <strong>View</strong> select <strong>"temp-Azure-01"</strong> and under <strong>EPG-Azure-01</strong> specific setting locate <strong>Contract</strong> section</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image248.png" width = 800></p>
<p>Hit <strong>"Add Contract"</strong> button and add the following contract: </p>
<p>Contract 1: </p>
<ul>
<li>EPG: <strong>EPG-Azure-01</strong></li>
<li>Contract: <strong>con-Azure-01-to-Azure-02</strong></li>
<li>Type: <strong>provider</strong> </li>
</ul>
<p>Contract 2:</p>
<ul>
<li>EPG: <strong>EPG-Azure-01</strong></li>
<li>Contract: <strong>con-Azure-02-to-Azure-01</strong></li>
<li>Type: <strong>consumer</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image249.png" width = 800></p>
<p>Hit <strong>Deploy to sites</strong> for contracts to be applied to EPGs. </p>
<p><strong>Let's come back to Tenant-Azure-02 to consume newly created contract.</strong></p>
<p>Under Schema <strong>"Schema-T02-Azure"</strong> navigate to <strong>View</strong> select <strong>"temp-Azure-01"</strong> and under <strong>EPG-Azure-02</strong> specific setting locate <strong>Contract</strong> section</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image242.png" width = 800></p>
<p>Hit <strong>"Add Contract"</strong> button and add the following contract: </p>
<ul>
<li>EPG: <strong>EPG-Azure-02</strong></li>
<li>Contract: <strong>con-Azure-01-to-Azure-02</strong></li>
<li>Type: <strong>consumer</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image250.png" width = 800></p>
<p>Hit <strong>Deploy to sites</strong> for contracts to be applied to EPGs. </p>
<p>## Cross-Tenant traffic verification </p>
<p>Let's check now if our Virtual Machines are able to communicate. For now we have configured that part of our infrastructure. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image251.png" width = 800></p>
<p>Login to Azure portal via https://portal.azure.com with your account details</p>
<p>Search for <strong>Virtual machine</strong> in search bar and open from Services list </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image130.png" width = 800></p>
<p>On the Azure Virtual Machine <strong>VM-AZ-02</strong>, scroll down to <strong>"Help"</strong> Section and select <strong>"Serial Console"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image252.png" width = 800></p>
<p>Hit enter and provide VM login credentials:</p>
<ul>
<li>username: <strong>student</strong> </li>
<li>password: <strong>CiscoLive2023!</strong></li>
</ul>
<p>Once in the console try to reach via ping to private IP address of Virutal Machine <strong>VM-AZ-01</strong> </p>
<div class="highlight"><pre><span></span><code>student@VM-AZ-02:~$ ping 10.100.0.4
PING 10.100.0.4 (10.100.0.4) 56(84) bytes of data.
64 bytes from 10.100.0.4: icmp_seq=1 ttl=63 time=4.48 ms
64 bytes from 10.100.0.4: icmp_seq=2 ttl=63 time=6.70 ms
64 bytes from 10.100.0.4: icmp_seq=3 ttl=63 time=3.19 ms
64 bytes from 10.100.0.4: icmp_seq=4 ttl=63 time=6.22 ms
^C
--- 10.100.0.4 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3005ms
rtt min/avg/max/mdev = 3.185/5.147/6.699/1.401 ms
student@VM-AZ-02:~$
</code></pre></div>
<p>Communication is successfull! Well done. </p>
<p>## Cloud Routers verification </p>
<h1 id="use-case3-this-test-has-completed-our-lab-hope-you-enjoyed-it-and-learn-some-new-infromations">This test has completed our lab, hope you enjoyed it and learn some new infromations.</h1></section><h1 class='nav-section-title-end'>Ended: Use-cases</h1>
                        <h1 class='nav-section-title' id='section-appendixes'>
                            Appendixes <a class='headerlink' href='#section-appendixes' title='Permanent link'>↵</a>
                        </h1>
                        
                        <h2 class='nav-section-title' id='section-lab-details'>
                            Lab details <a class='headerlink' href='#section-lab-details' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="pod1"><h1 id="pod1-pod1-ltrcld-2557-lab-access-details">POD1 LTRCLD-2557 Lab access details</h1>
<h2 id="pod1-aws-resources"><strong>AWS Resources</strong></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure to use correct account (Infra or User) as indicated in lab guide!</p>
</div>
<h3 id="pod1-aws-infrastructure-tenant"><strong>AWS Infrastructure Tenant</strong></h3>
<p>AWS Infra Account ID: <br> <strong>xxxxxxx</strong></p>
<p>AWS Infra Account Username:<br> <strong>xxxx</strong></p>
<p>AWS Infra Account Password:<br> <strong>xxxxx!</strong></p>
<h3 id="pod1-aws-infra-resources"><strong>AWS Infra resources</strong></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Username</th>
<th>Password</th>
<th>Public IPv4 address</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ND1-Master</td>
<td>admin</td>
<td>xxxx!</td>
<td>https://xx</td>
<td>Nexus Dashboard appliance</td>
</tr>
<tr>
<td>Cisco Cloud Network Controller</td>
<td>admin</td>
<td>xxxxx!</td>
<td>https://xx</td>
<td>CNC-AWS-01 Cloud Network Controller</td>
</tr>
<tr>
<td>csr-[ct_routerp_eu-central-1_0:0]</td>
<td>csradmin</td>
<td>CiscoLive2023!</td>
<td>xx</td>
<td>AWS Cloud Router 01</td>
</tr>
<tr>
<td>csr-[ct_routerp_eu-central-1_1:0]</td>
<td>csradmin</td>
<td>CiscoLive2023!</td>
<td>xxx</td>
<td>AWS Cloud Router 02</td>
</tr>
</tbody>
</table>
<h3 id="pod1-aws-user-tenant"><strong>AWS User Tenant</strong></h3>
<p>AWS User Account ID:<br> <strong>xxx</strong></p>
<p>AWS User Account Username:<br> <strong>xxx</strong></p>
<p>AWS User Account Password:<br> <strong>xx!</strong></p>
<h2 id="pod1-azure-resources"><strong>Azure Resources</strong></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For Azure Cloud shared subscribtion model is used, hence login is the same for Infra and User account!</p>
</div>
<p>Login username:<br> <strong>student@xxxx.com</strong></p>
<p>Password:<br> <strong>xxx!</strong></p>
<h3 id="pod1-azure-infra-xxx"><strong>Azure Infra xxx</strong></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Username</th>
<th>Password</th>
<th>Public IPv4 address</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>CloudNetworkController</td>
<td>admin</td>
<td>x!</td>
<td>https://2xxx</td>
<td>CNC-Azure-01 Cloud Network Controller</td>
</tr>
<tr>
<td>ct_routerp_francecentral_0_0</td>
<td>csradmin</td>
<td>xxx!</td>
<td>xxx</td>
<td>Azure Cloud Router 01</td>
</tr>
<tr>
<td>ct_routerp_francecentral_1_0</td>
<td>csradmin</td>
<td>xxx!</td>
<td>xx</td>
<td>Azure Cloud Router 02</td>
</tr>
</tbody>
</table></section><h1 class='nav-section-title-end'>Ended: Lab details</h1><section class="print-page" id="object-map"><h1 id="object-map-aci-to-public-cloud-object-mapping">ACI to Public Cloud object mapping</h1>
<p>Cloud Netowrk Controller is using cloud native objects to map ACI constructins into various of public clouds. </p>
<h2 id="object-map-aci-to-aws-object-mapping">ACI to AWS object mapping</h2>
<p>Below you can find how ACI policy model is mapped to AWS cloud native objects </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/aws_object_mapping.png" width = 1000></p>
<h2 id="object-map-aci-to-aws-object-mapping_1">ACI to AWS object mapping</h2>
<p>Below you can find how ACI policy model is mapped to AWS cloud native objects </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/azure_object_mapping.png" width = 1000></p></section><h1 class='nav-section-title-end'>Ended: Appendixes</h1></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "/", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
    
  </body>
</html>