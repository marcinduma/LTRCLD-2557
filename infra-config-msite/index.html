
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Explore Simplicity of Public Cloud Network Configuration with Cloud Network Controller (formerly cAPIC) and Nexus Dashboard Orchestrator (NDO)">
      
      
        <meta name="author" content="Marcin Duma & Karol Okraska">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Multisite configuration - CiscoLive EMEA 2023 --- LTRCLD-2557</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#infrastructure-configuration-multisite-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CiscoLive EMEA 2023 --- LTRCLD-2557" class="md-header__button md-logo" aria-label="CiscoLive EMEA 2023 --- LTRCLD-2557" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CiscoLive EMEA 2023 --- LTRCLD-2557
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Multisite configuration
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CiscoLive EMEA 2023 --- LTRCLD-2557" class="md-nav__button md-logo" aria-label="CiscoLive EMEA 2023 --- LTRCLD-2557" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CiscoLive EMEA 2023 --- LTRCLD-2557
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Lab Access
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Lab Access" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Lab Access
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_access/" class="md-nav__link">
        Accessing the Lab Environment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          INFRA Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="INFRA Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          INFRA Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra-config/" class="md-nav__link">
        Sites onboarding
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Multisite configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Multisite configuration
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nexus-dashboard-orchestratorndo" class="md-nav__link">
    Nexus Dashboard Orchestrator(NDO)
  </a>
  
    <nav class="md-nav" aria-label="Nexus Dashboard Orchestrator(NDO)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-ndo-service-introduction" class="md-nav__link">
    1. NDO Service Introduction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ndo-sites-onboarding" class="md-nav__link">
    2. NDO Sites Onboarding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-site-connectivity-configuration" class="md-nav__link">
    3. Site Connectivity Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inter-site-connectivity-veryfication" class="md-nav__link">
    Inter-site connectivity veryfication
  </a>
  
    <nav class="md-nav" aria-label="Inter-site connectivity veryfication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-nexush-dashboard-view" class="md-nav__link">
    1. Nexush Dashboard view
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inter-site-connectivity-veryfication-cloud-routers" class="md-nav__link">
    Inter-site connectivity veryfication  (Cloud Routers)
  </a>
  
    <nav class="md-nav" aria-label="Inter-site connectivity veryfication  (Cloud Routers)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-ipsec-tunnel-veryfication" class="md-nav__link">
    1. IPSec tunnel veryfication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ospf-adjacency-veryfication" class="md-nav__link">
    2. OSPF adjacency veryfication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-bgp-evpn-veryfication" class="md-nav__link">
    2. BGP EVPN veryfication
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Tenant configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tenant configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tenant configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ndo-tenant/" class="md-nav__link">
        NDO Tenant configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aws-trust/" class="md-nav__link">
        AWS Trust
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Use-cases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Use-cases" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Use-cases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../use-case1/" class="md-nav__link">
        Use-case 01 - Stretched VRF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../use-case2/" class="md-nav__link">
        Use-case 02 - Internet Gateway
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../use-case3/" class="md-nav__link">
        Use-case 03 - Inter-Tenant routing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Appendixes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Appendixes" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Appendixes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1">
          Lab details
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Lab details" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Lab details
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod1/" class="md-nav__link">
        POD-01
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod2.md" class="md-nav__link">
        POD-02
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod3.md" class="md-nav__link">
        POD-03
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod4.md" class="md-nav__link">
        POD-04
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod5.md" class="md-nav__link">
        POD-05
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod6.md" class="md-nav__link">
        POD-06
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod7.md" class="md-nav__link">
        POD-07
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod8.md" class="md-nav__link">
        POD-08
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod9.md" class="md-nav__link">
        POD-09
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pod10.md" class="md-nav__link">
        POD-10
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../object-map/" class="md-nav__link">
        ACI to Public Cloud Object mapping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resources/" class="md-nav__link">
        Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../print_page/" class="md-nav__link">
        PRINT version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nexus-dashboard-orchestratorndo" class="md-nav__link">
    Nexus Dashboard Orchestrator(NDO)
  </a>
  
    <nav class="md-nav" aria-label="Nexus Dashboard Orchestrator(NDO)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-ndo-service-introduction" class="md-nav__link">
    1. NDO Service Introduction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ndo-sites-onboarding" class="md-nav__link">
    2. NDO Sites Onboarding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-site-connectivity-configuration" class="md-nav__link">
    3. Site Connectivity Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inter-site-connectivity-veryfication" class="md-nav__link">
    Inter-site connectivity veryfication
  </a>
  
    <nav class="md-nav" aria-label="Inter-site connectivity veryfication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-nexush-dashboard-view" class="md-nav__link">
    1. Nexush Dashboard view
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inter-site-connectivity-veryfication-cloud-routers" class="md-nav__link">
    Inter-site connectivity veryfication  (Cloud Routers)
  </a>
  
    <nav class="md-nav" aria-label="Inter-site connectivity veryfication  (Cloud Routers)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-ipsec-tunnel-veryfication" class="md-nav__link">
    1. IPSec tunnel veryfication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ospf-adjacency-veryfication" class="md-nav__link">
    2. OSPF adjacency veryfication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-bgp-evpn-veryfication" class="md-nav__link">
    2. BGP EVPN veryfication
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="infrastructure-configuration-multisite-configuration">Infrastructure configuration - MultiSite configuration</h1>
<p>In this lab section we will use Nexus Dashboard Orchestrator(NDO) to connect 2 Cloud Fabrics together. </p>
<h2 id="nexus-dashboard-orchestratorndo">Nexus Dashboard Orchestrator(NDO)</h2>
<p><strong>Cisco Nexus Dashboard Orchestrator (NDO)</strong> provides consistent network and policy orchestration, scalability, and disaster recovery across multiple data centers through a single pane of glass while allowing the data center to go wherever the data is.</p>
<p>NDO allows you to interconnect separate Cisco® Application Centric Infrastructure (Cisco ACI®) sites, Cisco Cloud ACI sites, and Cisco Nexus Dashboard Fabric Controller (NDFC) sites, each managed by its own controller (APIC cluster, NDFC cluster, or Cloud APIC instances in a public cloud). The on-premises sites (ACI or NDFC in the future) can be extended to different public clouds for hybrid-cloud deployments while cloud-first installations can be extended to multi-cloud deployments without on-premises sites. </p>
<p>The single-pane network interconnect policy management and the consistent network workload and segmentation policy provided by NDO allows monitoring the health of the interconnected fabrics, enforcement of segmentation and security policies, and performance of all tasks required to define tenant intersite policies in APIC, NDFC, and cAPIC sites. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image23a.png" width = 800></p>
<p>● Key features and benefits</p>
<ul>
<li>
<p>Single pane of glass for administration and orchestration of multiple networking fabrics for both Cisco ACI and NDFC</p>
</li>
<li>
<p>Automation of the configuration and management of intersite network interconnects across an IP backbone for both Cisco ACI and NDFC</p>
</li>
<li>
<p>Consistent multitenant policy across multiple sites, which allows IP mobility, disaster recovery, and active/active use cases for data centers</p>
</li>
<li>
<p>Capability to map tenants, applications, and associated networks to specific availability domains within the Cisco Multi-Site architecture for both Cisco ACI and NDFC</p>
</li>
<li>
<p>Hybrid cloud and multi-cloud orchestration supporting on-premises Cisco ACI sites and public cloud sites (AWS and Azure)</p>
</li>
<li>
<p>Capability to have multi-cloud ACI deployments without on-premises sites</p>
</li>
<li>
<p>Scale out sites and leaf switches based on resource growth</p>
</li>
</ul>
<p>●Use cases</p>
<p>There are several uses of Cisco Nexus Dashboard Orchestrator. Some of the main use cases include:</p>
<ul>
<li>
<p>Large scale data center deployment</p>
</li>
<li>
<p>Data center interconnectivity</p>
</li>
<li>
<p>Cisco NDO multi-domain integrations</p>
</li>
<li>
<p>Hybrid cloud and multi-cloud</p>
</li>
<li>
<p>Service provider – 5G telco</p>
</li>
</ul>
<p><strong>Let's now explore possibilites of Cisco Nexus Dashboard Orchestrator!</strong></p>
<h3 id="1-ndo-service-introduction">1. NDO Service Introduction</h3>
<p>In the navigation menu on the left go to <strong>"Admin Console"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image24.png" width = 400></p>
<p>You will be moved to <strong>Admin Console</strong> page, where you can see <strong>Health</strong> of your Nexus Dashboard and status of sites and services. </p>
<p>Navigate to <strong>"Sites"</strong> tab and verify if <strong>"Connectivity Status"</strong> of you sites is <strong>"Up"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image26.png" width = 800></p>
<p>Navigate to <strong>"Sevices"</strong> tab to see what applications are installed on this Nexus Dashboard</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image25.png" width = 400></p>
<p><strong>Nexus Dashboard Orchestrator</strong> is already installed and enabled under <strong>"Service Catalog"</strong> inside <strong>"Installed Service"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image27.png" width = 800></p>
<p>Hit <strong>"Open"</strong> button in order to login </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image28.png" width = 400></p>
<p>You will be now redirected to <strong>Nexus Dashboard Orchestrator</strong> Dashboard. </p>
<h3 id="2-ndo-sites-onboarding">2. NDO Sites Onboarding</h3>
<p>In order to configure AWS and Azure sites from NDO, added previously on <strong>Nexus Dashboard</strong>, sites have to be <strong>Maneged</strong> and have <strong>Site ID</strong> assigned. </p>
<p>Navigate to <strong>Sites</strong>: </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image30.png" width = 800></p>
<p>Click on <strong>"Unmanaged"</strong> box under <strong>State</strong> Column for each site and assign <strong>Site ID</strong>, confirming with <strong>"Add"</strong> button. </p>
<div class="highlight"><pre><span></span><code>For AWS Site - set ID **10**

For Azure Site - set ID **20**
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image31.png" width = 800></p>
<p>After this operation - both sites should be visible as <strong>Managed</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image32.png" width = 800></p>
<h3 id="3-site-connectivity-configuration">3. Site Connectivity Configuration</h3>
<p>In Next Step we would configure Infrastructure to connect 2 Cloud ACI Sites togehter.</p>
<p>Navigate to <strong>Infrastructure</strong> -&gt; <strong>Site Connectivity</strong> -&gt; <strong>Configure</strong> button</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image33.png" width = 800></p>
<p>On the <strong>General Settings</strong> Page, scroll down to OSPF Configuration and fill in OSPF Area ID to value <strong>0.0.0.0</strong>, leave other setting as default. OSPF Protocol will be configured over IPSec tunnel and allows for prefixes exchange to bring BGP Neighbourship. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image34.png" width = 800></p>
<p>Go to tab <strong>"IPSec Tunnel Subnet Pools"</strong>, click <strong>Add IP address</strong> button and add subnet</p>
<div class="highlight"><pre><span></span><code>Subnet: 192.168.255.0/24
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image40.png" width = 800></p>
<p>Confirm with <strong>checkbox</strong> button.</p>
<p>You may notice that there is already one subnet 169.254.0.0/16 configured, which is used for Tunnel addresing between Cloud Routers and Cloud Load Balancers(Azure)/Transit Gateways(AWS). Those tunnles are used to forward traffic from Cloud instances to Cloud Routers and further to another sites. </p>
<p>In the left navigation bar, under the Sites bar, click on first site <strong>CNC-AWS-01</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image35.png" width = 200></p>
<p>Enable the site for MultiSite by checking the checkbox <strong>"ACI Multisite"</strong> also enable <strong>"Contract Based Routing"</strong></p>
<div class="highlight"><pre><span></span><code>Settings:
- ACI Multisite - checked 
- Contract Based Routing - checked
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image36.png" width = 800></p>
<p>Click the "Add Site" button to cross-connect 2 sites. Under <strong>Connected to Site</strong> select <strong>Select a Site</strong> hyperlink. </p>
<p>Select Azure fabric and hit <strong>Select</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image37.png" width = 800></p>
<p>For the <strong>Connection Type</strong> select <strong>Public Internet</strong> and hit <strong>Ok</strong>. Leave rest of the setting as default, you can review them. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image38.png" width = 800></p>
<p>Move to <strong>CNC-Azure-01</strong> Site and also enable the site for MultiSite by checking the checkbox <strong>"ACI Multisite"</strong> - simiar as in previous point. </p>
<div class="highlight"><pre><span></span><code>Settings:
- ACI Multisite - checked 
- Contract Based Routing - checked
</code></pre></div>
<p>Note that second site is already selected for Inter-Site Connectivity</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image39.png" width = 800></p>
<p>Once done, locate the <strong>Deploy</strong> button on top the screen, click it and Select <strong>"Deploy Only"</strong>, hit <strong>Yes</strong> for confirmation. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image41.png" width = 800></p>
<p>As you hit <strong>Deploy</strong> button, NDO will now configure CNC and Cloud Routes (previously deployed and visible in AWS EC2/Azure Virutal Machines pages). Configuration includes:  </p>
<div class="highlight"><pre><span></span><code>- IPSec tunnels, full mesh between all 4 routers (2 per Cloud)
- OSPF routing over IPSec Tunnels
- BGP EVPN peering for prefixes exchange
</code></pre></div>
<h2 id="inter-site-connectivity-veryfication">Inter-site connectivity veryfication</h2>
<p><strong>It may take 5-10 minutes for configuration to be pushed and Tunnels to be established.</strong></p>
<p>At this point we configured this part of our topology diagram: </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image42.png" width = 800></p>
<h3 id="1-nexush-dashboard-view">1. Nexush Dashboard view</h3>
<p>Nexus Dashboard allows for monitoring of Inter-Site connectivity. </p>
<p>On the Left navigation page click <strong>"Dashboard"</strong> to go back to main Connectivity View. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image43.png" width = 800></p>
<p>Take a look into green line between AWS and Azure site(you can use use magnifying tool for better view). Green line indicated that all is fine with connectivity. </p>
<p>On the Left navigation page click <strong>"Infrastructure"</strong> -&gt; <strong>"Site Connectivity"</strong> and scroll down on a page. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image44.png" width = 300></p>
<p>Under the site list, locate "Show Connectivity Status" and click on it. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image45.png" width = 800></p>
<p>Check the connectivity status for both <strong>BGP EVPN</strong> as well as <strong>Tunnel Status.</strong> There should be 4 UP BGP sessions, as well as 4 Tunnels which are <strong>UP</strong> between Sites.</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image46.png" width = 800></p>
<h2 id="inter-site-connectivity-veryfication-cloud-routers">Inter-site connectivity veryfication  (Cloud Routers)</h2>
<h3 id="1-ipsec-tunnel-veryfication">1. IPSec tunnel veryfication</h3>
<p>Open Putty client from desktop and put IP address of Cloud router. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cloud Routers IP address are avaibale in POD details IP address schema.</p>
</div>
<p>Login with username <strong>"csradmin"</strong> and password <strong>"CiscoLive2023!"</strong></p>
<p>Execute command <strong>"show ip int brief | include Tunnel"</strong></p>
<div class="highlight"><pre><span></span><code>show ip int brief | include Tunnel
</code></pre></div>
<p>Expected output: </p>
<div class="highlight"><pre><span></span><code>ct_routerp_eu-central-1_0_0#show ip int brief | include Tunnel
Tunnel0                10.10.0.52      YES unset  up                    up      
Tunnel1                169.254.112.1   YES NVRAM  up                    up      
Tunnel6                192.168.255.4   YES NVRAM  up                    up      
Tunnel7                192.168.255.2   YES NVRAM  up                    up      
ct_routerp_eu-central-1_0_0#
</code></pre></div>
<p>Verify that all 4 tunnels are up/up. </p>
<p>Tunnel0 is addressed from TEP pool of our Cloud Contoller Fabric and it's used for communication between CNC and Cloud Router. </p>
<p>Tunnel1 is a connected to inside of a Cloud. Depends on the provider - it's an Azure Load Balancer or AWS Transit Gateway and routing will be injected to send traffic towards VNETs and VPC CIDRs. </p>
<p>Tunnel6 and Tunnel7 are configured towards two (2) Catalyst 8000V Routers in another site. Note also that Tunnel6 and Tunnel7 are addressed from IPSec subnet which was specified in the beginning of Multiste Configuration.</p>
<h3 id="2-ospf-adjacency-veryfication">2. OSPF adjacency veryfication</h3>
<p>Execute command <strong>"show ip ospf neighbor"</strong></p>
<div class="highlight"><pre><span></span><code>show ip ospf neighbor
</code></pre></div>
<p>Expected output: </p>
<div class="highlight"><pre><span></span><code>ct_routerp_eu-central-1_0_0#show ip ospf neighbor

Neighbor ID     Pri   State           Dead Time   Address         Interface
10.20.0.20        0   FULL/  -        00:00:33    192.168.255.3   Tunnel7
10.20.0.68        0   FULL/  -        00:00:38    192.168.255.5   Tunnel6
ct_routerp_eu-central-1_0_0#
</code></pre></div>
<p>Verify that both sessions are in <strong>FULL</strong> State. OSPF Neighbourship allows for prefixes exchange, so BGP session can be build. </p>
<h3 id="2-bgp-evpn-veryfication">2. BGP EVPN veryfication</h3>
<p>Execute command <strong>"show bgp l2vpn evpn summary"</strong></p>
<div class="highlight"><pre><span></span><code>show bgp l2vpn evpn summary
</code></pre></div>
<p>Expected output: </p>
<div class="highlight"><pre><span></span><code>ct_routerp_eu-central-1_0_0#show bgp l2vpn evpn summary 
BGP router identifier 10.10.0.20, local AS number 65110
BGP table version is 1, main routing table version 1

Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
10.20.0.52      4        65200      96      94        1    0    0 01:22:47        0
10.20.0.116     4        65200      95      94        1    0    0 01:22:52        0
ct_routerp_eu-central-1_0_0#
</code></pre></div>
<p>Verify that both sessions are Up (O in "State/PfxRcd" column)</p>
<p><strong>In Next Section our First Tenant will be configured!</strong></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../infra-config/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Sites onboarding" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Sites onboarding
            </div>
          </div>
        </a>
      
      
        
        <a href="../ndo-tenant/" class="md-footer__link md-footer__link--next" aria-label="Next: NDO Tenant configuration" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              NDO Tenant configuration
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
    
  </body>
</html>