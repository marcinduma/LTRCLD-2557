
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Explore Simplicity of Public Cloud Network Configuration with Cloud Network Controller (formerly cAPIC) and Nexus Dashboard Orchestrator (NDO)">
      
      
        <meta name="author" content="Marcin Duma & Karol Okraska">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Print Site - CiscoLive EMEA 2023 --- LTRCLD-2557</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CiscoLive EMEA 2023 --- LTRCLD-2557" class="md-header__button md-logo" aria-label="CiscoLive EMEA 2023 --- LTRCLD-2557" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CiscoLive EMEA 2023 --- LTRCLD-2557
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print Site
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CiscoLive EMEA 2023 --- LTRCLD-2557" class="md-nav__button md-logo" aria-label="CiscoLive EMEA 2023 --- LTRCLD-2557" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CiscoLive EMEA 2023 --- LTRCLD-2557
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Lab Access
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Lab Access" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Lab Access
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_access/" class="md-nav__link">
        Accessing the Lab Environment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          INFRA Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="INFRA Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          INFRA Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra-config/" class="md-nav__link">
        Sites onboarding
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra-config-msite/" class="md-nav__link">
        Multisite configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Tenant configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tenant configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tenant configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ndo-tenant/" class="md-nav__link">
        NDO Tenant configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aws-trust/" class="md-nav__link">
        AWS Trust
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Use-cases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Use-cases" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Use-cases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../use-case1/" class="md-nav__link">
        Use-case 01 - Stretched VRF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../use-case2/" class="md-nav__link">
        Use-case 02 - Internet Gateway
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../use-case3/" class="md-nav__link">
        Use-case 03 - Inter-Tenant routing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Appendixes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Appendixes" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Appendixes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../object-map/" class="md-nav__link">
        ACI to Public Cloud Object mapping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resources/" class="md-nav__link">
        Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="./" class="md-nav__link">
        PRINT version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    1. Home
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-lab-access" class="md-nav__link">
    I. Lab Access
  </a>
  
    <nav class="md-nav" aria-label="I. Lab Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lab_access" class="md-nav__link">
    2. Accessing the Lab Environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-infra-configuration" class="md-nav__link">
    II. INFRA Configuration
  </a>
  
    <nav class="md-nav" aria-label="II. INFRA Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#infra-config" class="md-nav__link">
    3. Sites onboarding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infra-config-msite" class="md-nav__link">
    4. Multisite configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-tenant-configuration" class="md-nav__link">
    III. Tenant configuration
  </a>
  
    <nav class="md-nav" aria-label="III. Tenant configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ndo-tenant" class="md-nav__link">
    5. NDO Tenant configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-trust" class="md-nav__link">
    6. AWS Trust
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-use-cases" class="md-nav__link">
    IV. Use-cases
  </a>
  
    <nav class="md-nav" aria-label="IV. Use-cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case1" class="md-nav__link">
    7. Use-case 01 - Stretched VRF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case2" class="md-nav__link">
    8. Use-case 02 - Internet Gateway
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case3" class="md-nav__link">
    9. Use-case 03 - Inter-Tenant routing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-appendixes" class="md-nav__link">
    V. Appendixes
  </a>
  
    <nav class="md-nav" aria-label="V. Appendixes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#object-map" class="md-nav__link">
    10. ACI to Public Cloud Object mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    11. Resources
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section id="print-site-cover-page">
            <div>

    
        <h1>CiscoLive EMEA 2023 --- LTRCLD-2557</h1>
    

</div>


<table>

    
    <tr>
        <td>Description</td>
        <td>Explore Simplicity of Public Cloud Network Configuration with Cloud Network Controller (formerly cAPIC) and Nexus Dashboard Orchestrator (NDO)</td>
    </tr>
    

    
    <tr>
        <td>Author(s)</td>
        <td>Marcin Duma & Karol Okraska</td>
    </tr>
    

    

    

</table>
        </section>
        
        <div id="print-site-banner">
            <p>
<center><em>This box will disappear when printing</em></center>
</p>
<p>
<center> This page has combined all site pages into one. You can export to PDF using <b>File > Print > Save as PDF</b>.</center>
</p>
        </div>
        
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-welcome-to-ciscolive-2023-instructor-lab-about-aci-multicloud">Welcome to CiscoLive 2023 - Instructor Lab about ACI Multicloud</h1>
<p>Speakers:</p>
<p><em>Karol Okraska</em>, CX Delivery Architect, Cisco Systems, Inc.</p>
<p><em>Marcin Duma</em>, CX Delivery Architect, Cisco Systems, Inc.</p>
<h2 id="index-cisco-aci-support-of-public-cloud-infrastructure">Cisco ACI support of Public Cloud infrastructure</h2>
<p>Cisco Cloud Network Controller (formerly Cloud APIC) provides enterprises with networking tools necessary to accelerate their hybrid-cloud and/or multicloud journey.</p>
<p>Utilizing cloud-native constructs, the solution enables automation that accelerates infrastructure deployment and governance and simplifies management to easily connect workloads across multicloud environments. The Cisco Cloud Network Controller vision is to support enhanced observability, operations, and troubleshooting across the entire environment.</p>
<p>Cisco Cloud Network Controller enables:</p>
<p>●      Seamless connectivity for any workload at scale across any location</p>
<p>●      Operational simplicity and visibility across a vast multisite, multicloud</p>
<p>●      data-center network</p>
<p>●      Easy L4-7 services integration</p>
<p>●      Consistent security and segmentation</p>
<p>●      Business continuity and disaster recovery</p>
<h2 id="index-cloud-network-controller-components">Cloud Network Controller components:</h2>
<p>Cisco Cloud Network Controller is the main architectural component of this multicloud solution. It is the unified point of automation and management for the solution fabric including network and security policy, health monitoring, and optimizes performance and agility. The complete solution includes:</p>
<p>●      Cisco Cloud Network Controller(deployed in each Public Cloud which is to be managed) </p>
<p>●      Cisco Nexus Dashboard (in our lab deployed in AWS Cloud) - Multicloud networking orchestration and policy management, disaster recovery, and high availability, as well as provisioning and health monitoring.</p>
<p>●      Cisco Catalyst® 8000V - deployed in Public Clouds, allowing for communication with other Clouds or on-premises datacenter. Responsible for traffic secuirty and end to end policy enforcement. </p>
<h2 id="index-topology">Topology</h2>
<p>In this lab we will be using two(2) Public Cloud Provders: </p>
<p>●      Microsoft Azure</p>
<p>●      Amazon AWS </p>
<p>However Cloud Network Controller (CNC) is also supported on Google Cloud. </p>
<p>In both Public Enviroments CNC will be deployed. Nexus Dashboard orchestrator will be run on Nexus Dashboard appliance deployed in AWS cloud. </p>
<p>Due to time concern of this lab, Cloud Network Controller and Nexus Dasboard along with Nexus Dashboard Orchestrator Application will be pre-installed for you and ready for configuration. </p>
<p><strong>Intial lab diagram:</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image1a.png" width = 800></p>
<h2 id="index-lab-agenda"><strong>Lab agenda</strong></h2>
<h3 id="index-1-infrastructure-veryfication-login-and-access">1. Infrastructure veryfication - login and access</h3>
<h3 id="index-2-site-onboarding-in-nexus-dashboard">2. Site onboarding in Nexus Dashboard</h3>
<h3 id="index-3-multisite-infrastructure-configuration">3. Multisite infrastructure configuration</h3>
<h3 id="index-4-multisite-configuration-check">4. Multisite configuration check</h3>
<h3 id="index-5-tenant-creation-and-public-cloud-trust-configuration">5. Tenant creation and Public Cloud Trust configuration</h3>
<h3 id="index-6-three3-common-use-cases-configuration-and-veryfcation">6. Three(3) common use-cases configuration and veryfcation</h3>
<h4 id="index--stretched-vrf-across-public-clouds-with-cloud-local-epgs">- Stretched VRF across Public Clouds with Cloud-local EPGs</h4>
<h4 id="index--internet-gateway-configuration-in-aws">- Internet Gateway configuration in AWS</h4>
<h4 id="index--inter-tenant-routing">- Inter-Tenant routing</h4>
<p>Step by step configuration will guide you towards final topology as indicated in the picture below: </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image2.png" width = 800></p>
<p><strong><p style="text-align: center;">Enjoy!</p></strong></p></section>
                        <h1 class='nav-section-title' id='section-lab-access'>
                            Lab Access <a class='headerlink' href='#section-lab-access' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="lab_access"><h1 id="lab_access-connectivity-check">Connectivity Check</h1>
<h2 id="lab_access-1-lab-access-general-description">1. Lab access general description</h2>
<p>This lab is fully hosted in Public Cloud infrastrucure, both AWS and Azure, no local resources are used. </p>
<p>You will have access to Public Cloud Console Interface, as well as you will be able to login to necessary resources and appliances. </p>
<h2 id="lab_access-2-aws-and-azure-console-access-details">2. AWS and Azure console access details:</h2>
<p>Login link for AWS console: https://console.aws.amazon.com</p>
<p>Login link for Azure portal: https://portal.azure.com </p>
<h2 id="lab_access-3-accessing-cloud-network-controller-and-nexus-dashboard">3. Accessing Cloud Network Controller and Nexus Dashboard.</h2>
<p>All appliances are addressed with Public IP address, hence it can be accessed from local browser without any additional settings or VPN connections. </p></section><h1 class='nav-section-title-end'>Ended: Lab Access</h1>
                        <h1 class='nav-section-title' id='section-infra-configuration'>
                            INFRA Configuration <a class='headerlink' href='#section-infra-configuration' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="infra-config"><h1 id="infra-config-infrastructure-configuration-site-onboarding">Infrastructure configuration - Site onboarding</h1>
<h2 id="infra-config-find-public-ip-address-of-nexus-dashboard-and-cisco-cloud-network-controller-in-aws">Find Public IP Address of Nexus Dashboard and Cisco Cloud Network Controller in AWS</h2>
<h3 id="infra-config-1-open-aws-console-via-browser">1. Open AWS console via browser</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image3.png" width = 400></p>
<h3 id="infra-config-2-select-iam-user-provide-account-id-and-hit-next">2. Select IAM user,  provide Account ID and hit "Next"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image4.png" width = 300></p>
<h3 id="infra-config-3-provide-username-and-password-and-hit-sign-in">3. Provide Username and password and hit "Sign In"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image5.png" width = 300></p>
<h3 id="infra-config-4-in-aws-search-bar-type-ec2-and-select-ec2-services-tab">4. In AWS Search Bar type "EC2" and Select "EC2" Services Tab</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image6.png" width = 800></p>
<h3 id="infra-config-5-from-resources-select-instances-running">5. From "Resources" select "Instances (Running)"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image7.png" width = 800></p>
<h3 id="infra-config-6-on-the-instances-list-scroll-to-the-right-and-note-down-public-ipv4-address">6. On the Instances List scroll to the right and note down "Public IPv4 address"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image8.png" width = 800></p>
<h2 id="infra-config-find-public-ip-address-of-cisco-cloud-network-controller-in-azure">Find Public IP Address of Cisco Cloud Network Controller in Azure</h2>
<h3 id="infra-config-1-open-azure-portal-via-browser">1. Open Azure portal via browser</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image14.png" width = 400></p>
<h3 id="infra-config-2-enter-your-username-along-with-domain-and-hit-next">2. Enter your username along with domain and hit "Next"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image15.png" width = 400></p>
<h3 id="infra-config-3-provide-password-and-hit-sign-in">3. Provide password and hit "Sign In"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image16.png" width = 400></p>
<h3 id="infra-config-4-use-skip-for-now-option-for-account-protection">4. Use "Skip for now" option for Account Protection</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image17.png" width = 800></p>
<h3 id="infra-config-5-in-search-bar-look-for-virtual-machines-and-select-from-services">5. In Search bar look for "virtual machines" and select from services</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image18.png" width = 800></p>
<h3 id="infra-config-6-on-the-virtual-machines-list-scroll-to-the-right-and-note-down-public-ip-address">6. On the Virtual Machines list scroll to the right and note down "Public IP address"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image19.png" width = 800></p>
<h2 id="infra-config-nexus-dashboard-site-onboarding">Nexus Dashboard site onboarding</h2>
<h3 id="infra-config-1-login-to-nexus-dasboard-using-ip-collected-above-and-login-with-provided-credentials">1. Login to Nexus Dasboard using IP collected above and login with provided credentials</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image9.png" width = 800></p>
<h3 id="infra-config-2-hit-get-started-and-setup-screen-will-pop-up">2. Hit "Get started" and Setup screen will pop-up</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image10.png" width = 800></p>
<h3 id="infra-config-3-on-the-add-sites-section-hit-begin">3. On the "Add Sites" section hit "Begin"</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image11.png" width = 800></p>
<h3 id="infra-config-4-hit-add-site-button">4. Hit "Add Site" button</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image12.png" width = 800></p>
<h3 id="infra-config-5-add-aws-cloud-network-controller">5. Add AWS Cloud Network Controller</h3>
<ul>
<li>Site Type: <strong>"Cloud Network Controller"</strong></li>
<li>Name: <strong>"CNC-AWS-01"</strong></li>
<li>Hostname/IP Address: <strong>"Public IP of Cloud Network Controller for AWS collected above"</strong></li>
<li>Username: <strong>admin</strong></li>
<li>Password: <strong>CiscoLive2023!</strong></li>
<li>Login Domain: empty</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image13.png" width = 800></p>
<h3 id="infra-config-6-hit-save">6. Hit <strong>"Save"</strong></h3>
<p><strong>"AWS site should be added now, stay on the same page! "</strong></p>
<h3 id="infra-config-7-hit-add-site-button-one-more-time-to-add-azure-site">7. Hit "Add site button one more time to add Azure site</h3>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image20.png" width = 800></p>
<h3 id="infra-config-8-add-azure-site-details">8. Add Azure site details</h3>
<ul>
<li>Site Type: <strong>"Cloud Network Controller"</strong></li>
<li>Name: <strong>"CNC-Azure-01"</strong></li>
<li>Hostname/IP Address: <strong>"Public IP of Cloud Network Controller from Azure collected above"</strong></li>
<li>Username: <strong>admin</strong></li>
<li>Password: <strong>CiscoLive2023!</strong></li>
<li>Login Domain: empty</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image21.png" width = 800></p>
<h3 id="infra-config-6-hit-save_1">6. Hit <strong>"Save"</strong></h3>
<h2 id="infra-config-check-the-site-list">Check the site list</h2>
<p>You should see both sites added under the site list. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image22.png" width = 800></p></section><section class="print-page" id="infra-config-msite"><h1 id="infra-config-msite-infrastructure-configuration-multi-site-configuration">Infrastructure configuration - Multi-Site configuration</h1>
<p>In this lab section we will use Nexus Dashboard orchestrator to connect 2 ACI Fabrics together. </p>
<h2 id="infra-config-msite-nexus-dashboard-orchestratorndo">Nexus Dashboard Orchestrator(NDO)</h2>
<h3 id="infra-config-msite-1-ndo-introduction">1. NDO Introduction</h3>
<p>On the Site list hit "Continue" and then "Done" button to finish Initial Setup from previous chapter. </p>
<p>Click <strong>"Go To Dashboard"</strong> in bottom right corner - you should be moved to ND Dashboard with Site Map</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image23.png" width = 800></p>
<p>In the navigation menu on the left  go to <strong>"Admin Console"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image24.png" width = 400></p>
<p>You will be moved to <strong>Admin Console</strong> page, where you can see <strong>Health</strong> of your Nexus Dashboard and status of sites and services. </p>
<p>Navigate to <strong>"Sites"</strong> tab and verify if <strong>"Connectivity Status"</strong> of you sites is <strong>"Up"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image26.png" width = 800></p>
<p>Navigate to <strong>"Sevices"</strong> tab to see what applications are installed on this Nexus Dashboard</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image25.png" width = 400></p>
<p><strong>Nexus Dashboard Orchestrator</strong> is already installed and enabled under <strong>"Service Catalog"</strong> inside <strong>"Installed Service"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image27.png" width = 800></p>
<p>Hit <strong>"Open"</strong> button in order to login </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image28.png" width = 400></p>
<p>You will be now redirected to <strong>Nexus Dashboard Orchestrator</strong> Dashboard. </p>
<h3 id="infra-config-msite-2-ndo-sites-onboarding">2. NDO Sites Onboarding</h3>
<p>In order to configure AWS and Azure sites from NDO, added previously on <strong>Nexus Dashboard</strong>, sites have to be <strong>Maneged</strong> and have <strong>Site ID</strong> assigned. </p>
<p>Navigate to <strong>Sites</strong>: </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image30.png" width = 800></p>
<p>Click on <strong>"Unmanaged"</strong> box under <strong>State</strong> Column for each site and assign <strong>Site ID</strong>, confirming with <strong>"Add"</strong> button. </p>
<div class="highlight"><pre><span></span><code>For AWS Site - set ID **10**

For Azure Site - set ID **20**
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image31.png" width = 800></p>
<p>After this operation - both sites should be visable as <strong>Managed</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image32.png" width = 800></p>
<h3 id="infra-config-msite-3-site-connectivity-configuration">3. Site Connectivity Configuration</h3>
<p>In Next Step we would configure Infrastructure to connect 2 Cloud ACI Sites togehter.</p>
<p>Navigate to <strong>Infrastructure</strong> -&gt; <strong>Site Connectivity</strong> -&gt; <strong>Configure</strong> button</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image33.png" width = 800></p>
<p>On the <strong>General Settings</strong> Page, scroll down to OSPF Configuration and fill in OSPF Area ID to value <strong>0.0.0.0</strong>, leave other setting as default. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image34.png" width = 800></p>
<p>Go to tab <strong>"IPSec Tunnel Subnet Pools"</strong>, click <strong>Add IP address</strong> button and add subnet</p>
<div class="highlight"><pre><span></span><code>Subnet: 192.168.255.0/24
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image40.png" width = 800></p>
<p>Confirm with checkbox button.</p>
<p>In the left navigation bar, under the Sites bar, click on first site <strong>CNC-AWS-01</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image35.png" width = 200></p>
<p>Enable the site for MultiSite by checking the checkbox <strong>"ACI Multisite"</strong> also enable <strong>"Contract Based Routing"</strong></p>
<div class="highlight"><pre><span></span><code>Settings:
- ACI Multisite - checked 
- Contract Based Routing - checked
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image36.png" width = 800></p>
<p>Click the "Add Site" button to cross-connect 2 sites. Under <strong>Connected to Site</strong> select <strong>Select a Site</strong> hyperlink. </p>
<p>Select Azure fabric and hit <strong>Select</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image37.png" width = 800></p>
<p>For the <strong>Connection Type</strong> select <strong>Public Internet</strong> and hit <strong>Ok</strong>. Leave rest of the setting as default, you can review them. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image38.png" width = 800></p>
<p>Move to <strong>CNC-Azure-01</strong> Site and also enable the site for MultiSite by checking the checkbox <strong>"ACI Multisite"</strong> - simiar as in previous point. </p>
<div class="highlight"><pre><span></span><code>Settings:
- ACI Multisite - checked 
- Contract Based Routing - checked
</code></pre></div>
<p>Note that second site is already selected for Inter-Site Connectivity</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image39.png" width = 800></p>
<p>Once done, locate the <strong>Deploy</strong> button on top the screen, click it and Select <strong>"Deploy Only"</strong>, hit <strong>Yes</strong> for confirmation. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image41.png" width = 800></p>
<p>As you hit <strong>Deploy</strong> button, NDO will now configure CNC and Cloud Routes. </p>
<div class="highlight"><pre><span></span><code>- IPSec tunnels, full mesh between all 4 routers (2 per Cloud)
- OSPF routing over IPSec
- BGP EVPN peering for prefixes exchange
</code></pre></div>
<h2 id="infra-config-msite-inter-site-connectivity-veryfication">Inter-site connectivity veryfication</h2>
<p><strong>It may take 5-10 minutes for configuration to be pushed and Tunnels to be established.</strong></p>
<p>At this point we configured this part of our topology diagram: </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image42.png" width = 800></p>
<h3 id="infra-config-msite-1-nexush-dashboard-view">1. Nexush Dashboard view</h3>
<p>Nexus Dashboard allows for monitoring of Inter-Site connectivity. </p>
<p>On the Left navigation page click <strong>"Dashboard"</strong> to go back to main Connectivity View. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image43.png" width = 800></p>
<p>Take a look into green line between AWS and Azure site(you can use use magnifying tool for better view). Green line indicated that all is fine with connectivity. </p>
<p>On the Left navigation page click <strong>"Infrastructure"</strong> -&gt; <strong>"Site Connectivity"</strong> and scroll down on a page. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image44.png" width = 300></p>
<p>Under the site list, locate "Show Connectivity Status" and click on it. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image45.png" width = 800></p>
<p>Check the connectivity status for both <strong>BGP EVPN</strong> as well as <strong>Tunnel Status.</strong> There should be 4 UP BGP sessions, as well as 4 Tunnels which are <strong>UP</strong> between Sites.</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image46.png" width = 800></p>
<h2 id="infra-config-msite-inter-site-connectivity-veryfication-cloud-routers">Inter-site connectivity veryfication  (Cloud Routers)</h2>
<h3 id="infra-config-msite-1-ipsec-tunnel-veryfication">1. IPSec tunnel veryfication</h3>
<p>Open Putty client from desktop and put IP address of Cloud router. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>Cloud Routers IP address are avaibale in POD details IP address schema.</p>
<p>Login with username <strong>"csradmin"</strong> and password <strong>"CiscoLive2023!"</strong></p>
<p>Execute command <strong>"show ip int brief | include Tunnel"</strong></p>
<div class="highlight"><pre><span></span><code>show ip int brief | include Tunnel
</code></pre></div>
<p>Expected output: </p>
<div class="highlight"><pre><span></span><code>ct_routerp_eu-central-1_0_0#show ip int brief | include Tunnel
Tunnel0                10.10.0.52      YES unset  up                    up      
Tunnel1                169.254.112.1   YES NVRAM  up                    up      
Tunnel6                192.168.255.4   YES NVRAM  up                    up      
Tunnel7                192.168.255.2   YES NVRAM  up                    up      
ct_routerp_eu-central-1_0_0#
</code></pre></div>
<p>Verify that all 4 tunnels are up/up. </p>
<p>Note also that Tunnel6 and Tunnel7 are addressed from subnet which was specified in the beginning of Multiste Configuration. Those 2 tunnel are configured towards two (2) Catalyst 8000V Routers in another site! </p>
<h3 id="infra-config-msite-2-ospf-adjacency-veryfication">2. OSPF adjacency veryfication</h3>
<p>Execute command <strong>"show ip ospf neighbor"</strong></p>
<div class="highlight"><pre><span></span><code>show ip ospf neighbor
</code></pre></div>
<p>Expected output: </p>
<div class="highlight"><pre><span></span><code>ct_routerp_eu-central-1_0_0#show ip ospf neighbor

Neighbor ID     Pri   State           Dead Time   Address         Interface
10.20.0.20        0   FULL/  -        00:00:33    192.168.255.3   Tunnel7
10.20.0.68        0   FULL/  -        00:00:38    192.168.255.5   Tunnel6
ct_routerp_eu-central-1_0_0#
</code></pre></div>
<p>Verify that both sessions are in <strong>FULL</strong> State. </p>
<h3 id="infra-config-msite-2-bgp-evpn-veryfication">2. BGP EVPN veryfication</h3>
<p>Execute command <strong>"show bgp l2vpn evpn summary"</strong></p>
<div class="highlight"><pre><span></span><code>show bgp l2vpn evpn summary
</code></pre></div>
<p>Expected output: </p>
<div class="highlight"><pre><span></span><code>ct_routerp_eu-central-1_0_0#show bgp l2vpn evpn summary 
BGP router identifier 10.10.0.20, local AS number 65110
BGP table version is 1, main routing table version 1

Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
10.20.0.52      4        65200      96      94        1    0    0 01:22:47        0
10.20.0.116     4        65200      95      94        1    0    0 01:22:52        0
ct_routerp_eu-central-1_0_0#
</code></pre></div>
<p>Verify that both sessions are Up (O in "State/PfxRcd" column)</p></section><h1 class='nav-section-title-end'>Ended: INFRA Configuration</h1>
                        <h1 class='nav-section-title' id='section-tenant-configuration'>
                            Tenant configuration <a class='headerlink' href='#section-tenant-configuration' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="ndo-tenant"><h1 id="ndo-tenant-nexus-dasboard-orchestrator-tenant-configuration">Nexus Dasboard Orchestrator Tenant configuration</h1>
<p>In this section we will configure our first Tenant, streteched between Azure and AWS. As Cloud Network Controller will be used for configuration, we need to make sure that CNC has privillages to do so. Will learn how to do it. </p>
<h2 id="ndo-tenant-tenant-creation-on-ndo">Tenant Creation on NDO</h2>
<p>On the Left navigation page click <strong>"Application Management" -&gt; "Tenant"</strong> and then <strong>"Add Tenant"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image50.png" width = 800></p>
<p>Fill in Tenant details for name and description </p>
<ul>
<li>Display Name: Tenant-01</li>
<li>Descrption: Cisco Live 2023 AMS Tenant</li>
</ul>
<p>Associate Tenant to both Site by checking the checkbox next to it. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image51.png" width = 800></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For now you are not able to <strong>Save</strong> this configuration with red marking on both Sites. Click the <strong>Pencil</strong> button at the end of each site line to finish configuration. </p>
<p>Additional setting are needed for CNC, so it knows which subscribtion to use on Azure and which Tenant ID on AWS. </p>
</div>
<p><strong>CNC-Azure-01 site configuration</strong></p>
<p>For Azure site, we will be using the same <strong>Subscription</strong> as the one used for CNC deployment - select <strong>Mode</strong> as <strong>"Select Shared"</strong> and use existing subscription from drop-down. Leave security domains empty. Hit <strong>Save</strong>. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image52.png" width = 800></p>
<p><strong>CNC-AWS-01 site configuration</strong></p>
<p>For AWS site we have 2 options - <strong>Untrusted</strong> with Cloud Access key and Secret or <strong>Trusted</strong>. In our case we would be using Trusted configuration. </p>
<p>Each Tenant create on NDO with AWS Site association required sepearete Account ID on AWS site. You can find your in POD Details. </p>
<p>Fill in with your POD <strong> AWS User-Account ID</strong> and select <strong>Access Type</strong> as <strong>Trusted</strong>, hit <strong>Save</strong>. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image53.png" width = 800></p>
<p>Now configuration can be saved, leave assocaited user list empty as there are no additional users and hit <strong>Save</strong>.</p>
<p>On the Tenant list you should see <strong>Tenant-01</strong> created an assigned to 2 Sites. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image54.png" width = 800></p></section><section class="print-page" id="aws-trust"><h1 id="aws-trust-nexus-dasboard-orchestrator-tenant-aws-trust-configuration">Nexus Dasboard Orchestrator Tenant AWS Trust Configuration</h1>
<p>In previus step we select Tenant configuration Mode as Trusted, hence trust need to be made to allow for configuration. </p>
<h2 id="aws-trust-aws-user-account-login">AWS User Account Login</h2>
<p>Each User POD has two(2) AWS Accounts. </p>
<ul>
<li>1st for Infrastrucre Configuration </li>
<li>2nd for Tenant Configuration </li>
</ul>
<p>Open AWS console via browser </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As you are already logged into AWS for Infrastructure Account, you can logout or use Incognito Mode (preferably), or different browser. </p>
</div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image3.png" width = 400></p>
<p>Select IAM user, provide Account ID and hit "Next" </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For this login please use AWS User Account ID </p>
</div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image4.png" width = 300></p>
<p>Provide Username and password and hit "Sign In" </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image5.png" width = 300></p>
<p>You will land on the welcome page of AWS cloud console. </p>
<h2 id="aws-trust-aws-cloud-network-controller-login">AWS Cloud Network Controller Login</h2>
<p>Using the IP found during site onboarding (can be also found in POD guide), connect via browser to CNC GUI for AWS instance. Make sure to use the same incognito mode as for AWS User tenant. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The trust configuration CloudFormation script needs to be executed on AWS User Account! </p>
</div>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image60.png" width = 300></p>
<p>Provide Credentials and hit <strong>Login</strong></p>
<ul>
<li>Username: admin </li>
<li>Password: CiscoLive2023! </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image61.png" width = 800></p>
<p>Hit <strong>"Get started"</strong> to view Cloud Network Controller Dashboard. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image62.png" width = 800></p>
<p>Look on the <strong>Dashboard -&gt; Application Management -&gt; Tenants</strong> We can see newly create tenant in the list. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image63.png" width = 800></p>
<p>Double-click on the tenant name <strong>"Tenant-01"</strong> to open it. </p>
<p>Under the AWS Account section there is warning related to our Trust configuration, along with the <strong>"Run the CloudFormation Template"</strong> hyperlink.  </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image64.png" width = 800></p>
<p>Click on the hyperlink to run CloudFormation Script. You will be then redirected to AWS console CloudFormation Stack configuration. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image65.png" width = 800></p>
<p>All the parameters are already filled in, hit <strong>"Next"</strong> to continue. </p>
<p>In <strong>Specify stack details</strong> step - fill in stack name and hit <strong>"Next"</strong></p>
<ul>
<li>Stack Name: <strong>CNC-AWS-Trust</strong></li>
<li>Parameters: none</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image66.png" width = 800></p>
<p>In <strong>Configure stack options</strong> step - leave all options as default and hit <strong>"Next"</strong></p>
<p>In <strong>Review CNC-AWS-Trust</strong> step - leave all options as default, scroll down to <strong>"Capabilities"</strong> section and check the checkbox for resource creation and hit <strong>"Submit"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image67.png" width = 800></p>
<p>After couple of seconds(use refresh button) - stack will be completed and we are good to go. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image68.png" width = 800></p></section><h1 class='nav-section-title-end'>Ended: Tenant configuration</h1>
                        <h1 class='nav-section-title' id='section-use-cases'>
                            Use-cases <a class='headerlink' href='#section-use-cases' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="use-case1"><h1 id="use-case1-use-case-01-stretched-vrf">Use-case 01 - Stretched VRF</h1>
<p><strong>Previous tasks were focusing on infrastructure configuration, from now on, infrastructure is ready and will be working on logical topology.</strong></p>
<p>First use-case task will focus on:</p>
<ul>
<li>Configuration of stretch VRF inside Tenant-01</li>
<li>VPC CIDR, VNET configuration in respective clouds</li>
<li>EPG configuration in both clouds </li>
<li>EC2/Virutal Machine creation for communication testing </li>
<li>Contract configuration to allow traffic flow </li>
<li>Communication testing </li>
</ul>
<h2 id="use-case1-schema-template-configuration">Schema, Template configuration</h2>
<p>All logical polices and configuration is done in Nexus Dashboard via Schemas and Templates. Each Schema can have multiple Templates, but Template can belong to only one Schema. Each Template is also assocaited to one and only one Tenant. Template to site assoction will also define to which fabric (on prem or cloud) configration will be pushed, therefore is the smallest logical unit we can decide where changes are deployed. </p>
<h3 id="use-case1-1-schema-creation">1. Schema creation</h3>
<p>Navigate to <strong>Dashboard -&gt; Application Management -&gt; Schemas</strong>, then hit <strong>"Add Schema"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image70.png" width = 800></p>
<p>Add Schema name and Description and hit <strong>"Add"</strong> button</p>
<ul>
<li>Name: <strong>Schema-T01</strong> </li>
<li>Description: <strong>Schema for Tenant-01</strong></li>
</ul>
<h3 id="use-case1-2-template-creation">2. Template creation</h3>
<p>Under the Schema-T01, let's create first Template with <strong>"Add New Template"</strong> button</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image71.png" width = 800></p>
<p>For a Template type select <strong>"ACI Multi-Cloud"</strong> and hit <strong>"Add"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image72.png" width = 800></p>
<p>On the right side of the template screen, we can customize the Tempalte Display Name, and also select Tenant. Add Display Name and Select a Tenant. </p>
<ul>
<li>Display Name: <strong>temp-stretch-01</strong></li>
<li>Tenant setting: <strong>Tenant-01</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image73.png" width = 800></p>
<h3 id="use-case1-3-template-to-site-association">3. Template to site association</h3>
<p>For configuration in template to be deployed, appropriate sites need to be added. Sites added will decide to which fabric configuration will be pushed. </p>
<p>For <strong>stretch template</strong>, we want to add both Azure and AWS sites. </p>
<p>To do it under the <strong>Template Properties</strong> locate the <strong>Actions</strong> button and hit <strong>Sites Associations</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image76.png" width = 800></p>
<p>Select both site <strong>CNC-AWS-01</strong> and <strong>CNC-Azure-01</strong> and hit <strong>Ok</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image77.png" width = 800></p>
<h3 id="use-case1-4-vrf-configuration">4. VRF Configuration</h3>
<p>Inside <strong>Schema-T01</strong>, inside <strong>temp-stretch-01</strong> add the VRF with <strong>"Add VRF"</strong> button under <strong>VRFs</strong> box</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image74.png" width = 800></p>
<p>Add VRF Common Properties </p>
<ul>
<li>Display Name: <strong>VRF-01</strong> </li>
<li>Description: <strong>CL2023 Stretch VRF</strong></li>
</ul>
<p>Leave other as default. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image75.png" width = 800></p>
<p>As Tempalte was assocaited to both sites, we need to update details for each cloud, to do so under <strong>temp-stretch-01</strong> expand <strong>"Tempalate Properties"</strong> and go to <strong>"CNC-AWS-1"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image78.png" width = 800></p>
<p>CLick on the <strong>"VRF-01"</strong> which will open <strong>Site specific properties</strong> for this <strong>CNC-AWS-01 Site</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image79.png" width = 800></p>
<p>Under the <strong>"Tempalate Properties"</strong> hit <strong>"Add Region"</strong> button and select <strong>Region</strong> from the list and then hit  <strong>"Add CIDRs"</strong> button </p>
<ul>
<li><strong>Region:</strong> eu-central-1</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image80.png" width = 800></p>
<p>Now we need to specify what subnet we would like to use in AWS cloud for that VPC</p>
<ul>
<li>CIDR: <strong>10.0.0.0/23</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image81.png" width = 800></p>
<p>Our CIDR also needs to be divided into subnets for respetive Availability zone - hit <strong>"Add Subnet"</strong> to configure it. </p>
<p>We have to add subnet for a,b,c (number of AZ depends on the region), each subet need to be confirmed with click on <strong>checkbox</strong> button</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image82.png" width = 800></p>
<p>Create subnet for all 3 AZ in our Region, use non-virutal zone. </p>
<ul>
<li><strong>Subnet:</strong> 10.0.0.0/25      <strong>Name:</strong> az-1a-subnet <strong>AZ:</strong> eu-central-1a</li>
<li><strong>Subnet:</strong> 10.0.0.128/25    <strong>Name:</strong> az-1b-subnet <strong>AZ:</strong> eu-central-1b</li>
<li><strong>Subnet:</strong> 10.0.1.0/25      <strong>Name:</strong> az-1c-subnet <strong>AZ:</strong> eu-central-1c</li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image83.png" width = 800></p>
<p>When done, hit <strong>"Save"</strong> button to save subnet configuration. </p>
<p>We also want to connect our subnets to Catalys8000V routers, what is done ia Hub Network (Transit Gateway) - check the checkbox for <strong>"Hub Network"</strong>, select <strong>Hub Network</strong> and also <strong>Subnets</strong></p>
<ul>
<li>Hub Network: <strong>TGW-HUB</strong></li>
<li>Subnets: <strong>10.0.0.0/2, 10.0.0.128/25, 10.0.1.0/25</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image84.png" width = 800></p>
<p>Hit ok to finish configuration for <strong>CNC-AWS-01</strong> fabric.</p>
<p>Similar configuration has to be done for <strong>CNC-Azure-01</strong></p>
<p>Under <strong>temp-stretch-01</strong> expand <strong>"Tempalate Properties"</strong> and go to <strong>"CNC-Azure-1"</strong> </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image85.png" width = 800></p>
<p>CLick on the <strong>"VRF-01"</strong> which will open <strong>Site specific properties</strong> for this <strong>CNC-Azure-01 Site</strong></p>
<p>Under the <strong>"Tempalate Properties"</strong> hit <strong>"Add Region"</strong> button and select <strong>Region</strong> from the list and then hit  <strong>"Add CIDRs"</strong> button </p>
<ul>
<li><strong>Region:</strong> francecentral</li>
</ul>
<p>Now we need to specify what subnet we would like to use in AWS cloud for that VPC.</p>
<ul>
<li>CIDR: <strong>10.0.0.0/23</strong> </li>
</ul>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image86.png" width = 800></p>
<p>Similar like for AWS we also needs to add subnet, but in case of Azure we don't need to select <strong>Availability Zones.</strong> We can add whole CIDR as subnet. When done, hit <strong>"Save"</strong> button to save subnet configuration. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image87.png" width = 800></p>
<p>In case of Azure cloud, connection to CNC VNET is done via <strong>"VNET Peering"</strong> feature - enable it and select <strong>Default</strong> Hub Network</p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image88.png" width = 800></p>
<p>Hit ok to finish configuration for <strong>CNC-Azure-01</strong> fabric.</p>
<p>Under <strong>temp-stretch-01</strong> expand <strong>"Tempalate Properties"</strong> and go to <strong>"Tempalate Properties"</strong></p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image89.png" width = 800></p>
<p>When done <strong>"Deploy to sites"</strong> button will become active - click to deploy VRF to respective sites. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image90.png" width = 800></p>
<p>Nexus Dashboard will also show you want changes will be made. Hit <strong>Deploy</strong> button to push configuration. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image91.png" width = 800></p>
<p>If all goes well, confirmation pop-up will get displayed on the screen. </p>
<p><img src="https://raw.githubusercontent.com/marcinduma/LTRCLD-2557/master/images/image92.png" width = 800></p></section><h1 class='nav-section-title-end'>Ended: Use-cases</h1>
                        <h1 class='nav-section-title' id='section-appendixes'>
                            Appendixes <a class='headerlink' href='#section-appendixes' title='Permanent link'>↵</a>
                        </h1>
                        <h1 class='nav-section-title-end'>Ended: Appendixes</h1></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "/", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
    
  </body>
</html>